null==window.StyledElements&&(window.StyledElements={}),function(){"use strict";var t={gettext:function(t){return t},ngettext:function(t,e,n){return 1===n?t:e},interpolate:function(t,e){return t.replace(/%\(\w+\)s/g,function(t){return String(e[t.slice(2,-2)])})},Template:function(t){this.template=t}};t.Template.prototype.evaluate=function(e){return t.interpolate(this.template,e)},t.stopPropagationListener=function(t){t.stopPropagation()},t.preventDefaultListener=function(t){t.preventDefault()},t.callCallback=function(t,e){if("function"==typeof t)try{return t.apply(null,Array.prototype.slice.call(arguments,1))}catch(t){}},t.getFullscreenElement=function(){return"fullscreenElement"in document?document.fullscreenElement:"msFullscreenElement"in document?document.msFullscreenElement:"mozFullScreenElement"in document?document.mozFullScreenElement:"webkitFullscreenElement"in document?document.webkitFullscreenElement:void 0},t.onFullscreenChange=function(t,e){t instanceof StyledElements.StyledElement&&(t=t.wrapperElement),t.ownerDocument.addEventListener("fullscreenchange",e,!0),t.ownerDocument.addEventListener("msfullscreenchange",e,!0),t.ownerDocument.addEventListener("mozfullscreenchange",e,!0),t.ownerDocument.addEventListener("webkitfullscreenchange",e,!0)},t.removeFullscreenChangeCallback=function(t,e){t instanceof StyledElements.StyledElement&&(t=t.wrapperElement),t.ownerDocument.removeEventListener("fullscreenchange",e,!0),t.ownerDocument.removeEventListener("msfullscreenchange",e,!0),t.ownerDocument.removeEventListener("mozfullscreenchange",e,!0),t.ownerDocument.removeEventListener("webkitfullscreenchange",e,!0)},t.isFullscreenSupported=function(){return"fullscreenEnabled"in document?document.fullscreenEnabled:"mozFullScreenEnabled"in document?document.mozFullScreenEnabled:"webkitFullscreenEnabled"in document?document.webkitFullscreenEnabled:void 0},t.removeWord=function(t,e){return t.replace(new RegExp("(^\\s*|\\s+)"+e+"(\\s+|\\s*$)","g")," ").trim()},t.appendWord=function(e,n){return t.removeWord(e,n)+" "+n},t.prependWord=function(e,n){return n+" "+t.removeWord(e,n)},t.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var e=document.createElement("div");t.escapeHTML=function(t){return e.textContent=t,e.innerHTML},t.getRelativePosition=function(t,e){if(t===e)return{x:0,y:0};var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return{x:n.left-i.left,y:n.top-i.top}},t.clone=function(e,n){var i,s;if(null==e||"object"!=typeof e)return e;if(i=Array.isArray(e)?[]:{},n)for(s in e)i[s]=t.clone(e[s],!0);else for(s in e)i[s]=e[s];return i},t.cloneObject=function(e){var i={};if(null==e)return i;if(!t.isPlainObject(e))throw new TypeError("[error description]");for(var s in e)i[s]=n.call(t,e[s]);return i};var n=function(e){return null==e?null:t.isPlainObject(e)?this.cloneObject(e):Array.isArray(e)?e.slice():e};t.hasFocus=function(t){return document.activeElement===t},t.updateObject=function(e,n){for(var s in e=t.cloneObject(e),n=t.cloneObject(n))e[s]=i.call(t,e[s],n[s]);return e},t.isPlainObject=function(t){return"object"==typeof t&&null!==t&&!(t.constructor&&!Object.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))};var i=function(e,n){var i;return null==n?null==e&&(e=null):"function"==typeof n?(null==e||function(t,e){var n,i,s=!1;if("function"!=typeof t||"function"!=typeof e)return s;for(n=t.prototype,i=e.prototype;!(s=n===i)&&null!==(i=Object.getPrototypeOf(i))&&(i!==Object.prototype||n===i););return s}(e,n))&&(e=n):t.isPlainObject(n)?(null==e||t.isPlainObject(e))&&(e=this.updateObject(e,n)):Array.isArray(n)?(null==e&&(e=[]),Array.isArray(e)&&(e=e.concat(n))):null!=e&&(i=n,e.constructor!==i.constructor)||(e=n),e};t.inherit=function(e,n,i){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,t.merge(e.prototype,i)},t.highlight=function(t,e){return t.replace(new RegExp(e,"i"),function(t){return'<strong class="text-highlighted">'+t+"</strong>"})},t.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var s=["bytes","KiB","MiB","GiB","TiB"];Object.freeze(s),t.formatSize=function(e){if(null==e)return t.gettext("N/A");for(var n=0;n<s.length&&!(e<1024);n++)e/=1024;return(e=Math.round(100*e)/100)+" "+s[n]};var l={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:" ",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",46:"Delete",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"},r={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Spacebar:" "};t.extractModifiers=function(t){return{altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey}};var o=["Escape","Enter"];t.stopInputKeydownPropagationListener=function(e){var n,i;n=t.extractModifiers(e),i=t.normalizeKey(e),(n.altKey||n.metaKey||n.ctrlKey||-1!==o.indexOf(i))&&"Backspace"!==i||e.stopPropagation()},t.normalizeKey=function(t){var e;return e=t.key,!1===t.altKey&&e?e in r&&(e=r[e]):(e="Unidentified",t.keyCode in l&&(e=l[t.keyCode])),e},t.isElement=function(t){return null!=t&&"object"==typeof t&&"ownerDocument"in t&&t instanceof t.ownerDocument.defaultView.HTMLElement},t.appendChild=function(t,e,n){var i=a(t),s=h(n);return null!=s&&(s=s.nextSibling),"string"==typeof e&&(e=document.createTextNode(e)),c(e).map(function(e){return i.insertBefore(a(e),s),t instanceof StyledElements.StyledElement&&e instanceof StyledElements.StyledElement&&(e.parentElement=t),e})},t.prependChild=function(t,e,n){var i=a(t),s=u(n);return"string"==typeof e&&(e=document.createTextNode(e)),c(e).map(function(e){return i.insertBefore(a(e),null==s?i.firstChild:s),t instanceof StyledElements.StyledElement&&e instanceof StyledElements.StyledElement&&(e.parentElement=t),e})},t.removeChild=function(t,e){a(t).removeChild(a(e)),t instanceof StyledElements.StyledElement&&e instanceof StyledElements.StyledElement&&(e.parentElement=null)};var a=function(t){return t instanceof StyledElements.StyledElement?t.get():t},u=function(t){return t instanceof StyledElements.Fragment?t.elements[0]:t instanceof StyledElements.StyledElement?t.get():t},h=function(t){return t instanceof StyledElements.Fragment?t.elements[t.elements.length-1]:t instanceof StyledElements.StyledElement?t.get():t},c=function(t){return t instanceof StyledElements.StyledElement&&null==t.get()?t.children:[t]};t.isEmpty=function(t){return null==t||0===Object.keys(t).length},t.merge=function(t){if(null==t||"object"!=typeof t)throw new TypeError("object argument must be an object");return Array.prototype.slice.call(arguments,1).forEach(function(e){null!=e&&Object.keys(e).forEach(function(n){t[n]=e[n]})}),t},t.update=function(t){if(null==t||"object"!=typeof t)throw new TypeError("object argument must be an object");return Array.prototype.slice.call(arguments,1).forEach(function(e){null!=e&&Object.keys(e).forEach(function(n){n in t&&(t[n]=e[n])})}),t},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.waitTransition=function(t){return new Promise(function(e){t.addEventListener("transitionend",function n(i){t.removeEventListener("transitionend",n),e()})})},StyledElements.Utils=t}(),function(t,e){"use strict";var n=function(t){Object.defineProperties(this,{context:{value:t},handlers:{value:[]}}),i.set(this,{dispatching:!1})};n.prototype.addEventListener=function(t){if("function"!=typeof t)throw new TypeError("Handlers must be functions");this.handlers.push(t)},n.prototype.removeEventListener=function(t){var e;if("function"!=typeof t)throw new TypeError("Handlers must be functions");for(e=this.handlers.length-1;e>=0;e--)this.handlers[e]===t&&(i.get(this).dispatching?this.handlers[e]=null:this.handlers.splice(e,1))},n.prototype.clearEventListeners=function(){i.get(this).dispatching?this.handlers.forEach(function(t,e,n){n[e]=null}):this.handlers.length=0},n.prototype.dispatch=function(){var t;for(i.get(this).dispatching=!0,t=0;t<this.handlers.length;t++)if(null!=this.handlers[t])try{this.handlers[t].apply(this.context,arguments)}catch(t){null!=window.console&&"function"==typeof window.console.error&&window.console.error(t)}for(t=this.handlers.length-1;t>=0;t--)null==this.handlers[t]&&this.handlers.splice(t,1);i.get(this).dispatching=!1};var i=new WeakMap;StyledElements.Event=n}(StyledElements,StyledElements.Utils),function(t,e){"use strict";t.ObjectWithEvents=function(e){this.events={},(Array.isArray(e)?e:[]).forEach(function(e){this.events[e]=new t.Event(this)},this)},t.ObjectWithEvents.prototype={dispatchEvent:function(t){var n;if(!(t in this.events))throw new Error(e.interpolate("Unhandled event '%(name)s'",{name:t}));return n=[this].concat(Array.prototype.slice.call(arguments,1)),this.events[t].dispatch.apply(this.events[t],n),this},addEventListener:function(t,n){if(!(t in this.events))throw new Error(e.interpolate("Unhandled event '%(name)s'",{name:t}));return this.events[t].addEventListener(n),this},clearEventListeners:function(t){if("string"!=typeof t){for(t in this.events)this.events[t].clearEventListeners();return this}if(!(t in this.events))throw new Error(e.interpolate("Unhandled event '%(name)s'",{name:t}));return this.events[t].clearEventListeners(),this},destroy:function(){return this.events=null,this},removeEventListener:function(t,n){if(!(t in this.events))throw new Error(e.interpolate("Unhandled event '%(name)s'",{name:t}));return this.events[t].removeEventListener(n),this}},t.ObjectWithEvents.prototype.on=t.ObjectWithEvents.prototype.addEventListener,t.ObjectWithEvents.prototype.off=t.ObjectWithEvents.prototype.removeEventListener}(StyledElements,StyledElements.Utils),function(t,e){"use strict";t.StyledElement=function(e){this.wrapperElement=null,this.parentElement=null,Object.defineProperties(this,{enabled:{get:function(){return!this.hasClassName("disabled")},set:function(t){t=!!t,this.enabled!==t&&this.toggleClassName("disabled",!t)._onenabled(t)}},hidden:{get:function(){return this.hasClassName("hidden")},set:function(t){this.toggleClassName("hidden",t)._onhidden(t)}}}),e=Array.isArray(e)?e:[],t.ObjectWithEvents.call(this,["hide","show"].concat(e))},e.inherit(t.StyledElement,t.ObjectWithEvents,{_onenabled:function(t){},_onhidden:function(t){},addClassName:function(t){if(!Array.isArray(t)){if(""===(t=null==t?"":t.toString().trim()))return this;t=t.split(/\s+/)}return t.forEach(n,this),this},appendTo:function(n,i){return n instanceof t.StyledElement&&"function"==typeof n.appendChild?n.appendChild(this,i):e.appendChild(n,this,i),this},destroy:function(){this.remove(),t.ObjectWithEvents.prototype.destroy.call(this)},disable:function(){return this.enabled=!1,this},enable:function(){return this.enabled=!0,this},get:function(){return this.wrapperElement},hide:function(){return this.hidden||(this.hidden=!0,this.dispatchEvent("hide")),this},parent:function(){return null!=this.parentElement?this.parentElement.get():this.get().parentElement},prependTo:function(n,i){return n instanceof t.StyledElement&&"function"==typeof n.prependChild?n.prependChild(this,i):e.prependChild(n,this,i),this},remove:function(){return this.parentElement instanceof t.StyledElement&&"function"==typeof this.parentElement.removeChild?this.parentElement.removeChild(this):this.get().remove(),this},replaceClassName:function(t,e){return this.removeClassName(t),this.addClassName(e),this},show:function(){return this.hidden&&(this.hidden=!1,this.dispatchEvent("show")),this},style:function(t,e){if(1===arguments.length){if("string"==typeof t)return this.get().style[t];for(var n in t)this.get().style[n]=t[n]}else this.get().style[t]=null!=e?e:"";return this},toggleClassName:function(t,e){var l;return Array.isArray(t)||(t=""!==(t=null==t?[]:t.toString().trim())?t.split(/\s+/):[]),t.length&&("boolean"!=typeof e?t.forEach(s,this):(l=e?n:i,t.forEach(l,this))),this},_getUsableHeight:function(){var t=this.wrapperElement.parentElement;if(null==t)return null;var e=document.defaultView.getComputedStyle(t,null);if(null==e.getPropertyCSSValue("display"))return null;var n=document.defaultView.getComputedStyle(this.wrapperElement,null);return t.offsetHeight-e.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-e.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)},_getUsableWidth:function(){var t=this.wrapperElement.parentElement;if(null==t)return null;var e=document.defaultView.getComputedStyle(t,null),n=document.defaultView.getComputedStyle(this.wrapperElement,null);return t.offsetWidth-e.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-e.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)},getBoundingClientRect:function(){return this.wrapperElement.getBoundingClientRect()},hasClassName:function(t){return t=null==t?"":t.toString().trim(),this.get().classList.contains(t)},insertInto:function(t,e){return null!=e?this.prependTo(t,e):this.appendTo(t)},removeClassName:function(t){if(!Array.isArray(t)){if(""===(t=null==t?"":t.toString().trim()))return this.get().className="",this;t=t.split(/\s+/)}return t.forEach(i,this),this},repaint:function(t){return this},setDisabled:function(t){return t?this.disable():this.enable()}});var n=function(t){this.get().classList.add(t)},i=function(t){this.get().classList.remove(t)},s=function(t){this.get().classList.contains(t)?this.get().classList.remove(t):this.get().classList.add(t)}}(StyledElements,StyledElements.Utils),function(t,e){"use strict";t.OffCanvasLayout=function(n){t.StyledElement.call(this,["slideIn","slideOut"]),n=e.merge({sideway:"left"},n),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-offcanvas "+n.sideway+"-sideway",Object.defineProperties(this,{slipped:{get:function(){return this.hasClassName("slipped")}},sidebar:{value:new t.Container({class:"se-offcanvas-sidebar"})},content:{value:new t.Container({class:"se-offcanvas-content"})}}),this.index=-1,this.sidebar.appendTo(this.wrapperElement),this.content.appendTo(this.wrapperElement)},e.inherit(t.OffCanvasLayout,t.StyledElement,{appendChild:function(t){return this.sidebar.appendChild(t),this.index<0&&(this.index=this.sidebar.children.length-1),this},repaint:function(){return this.slipped&&this.sidebar.repaint(),this.content.repaint(),this},slideIn:function(t){var e;return this.sidebar.children.length&&(this.sidebar.children.forEach(function(t){t.hide()}),"number"==typeof t&&(this.index=t),e=this.sidebar.children[this.index].show()),this.toggleClassName("slipped",!0),this.dispatchEvent("slideIn",e)},slideOut:function(t){return"number"==typeof t&&(this.index=t),this.toggleClassName("slipped",!1),this.dispatchEvent("slideOut")}})}(StyledElements,StyledElements.Utils),function(t){"use strict";var e=function(t,e){this.inputElement=null,this.defaultValue=t,StyledElements.StyledElement.call(this,e)};t.inherit(e,StyledElements.StyledElement),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},set:function(t){return this.setValue(t)}}),e.prototype.getValue=function(){return this.inputElement.value},e.prototype.setValue=function(t){var e=this.inputElement.value;return this.inputElement.value=t,"change"in this.events&&t!==e&&this.dispatchEvent("change"),this},e.prototype.reset=function(){return this.setValue(this.defaultValue)},e.prototype.enable=function(){return StyledElements.StyledElement.prototype.enable.call(this),this.inputElement.disabled=!1,this},e.prototype.disable=function(){return StyledElements.StyledElement.prototype.disable.call(this),this.inputElement.disabled=!0,this},e.prototype.blur=function(){return this.inputElement.blur(),this},e.prototype.focus=function(){return this.inputElement.focus(),this},StyledElements.InputElement=e}(StyledElements.Utils),function(t){"use strict";var e=new WeakMap,n=function(t,n){if("function"!=typeof n)throw new TypeError("callback parameter must be a function");e.set(this,{callback:n,context:t,elements:[],running:!1}),Object.defineProperties(this,{callback:{value:n},context:{value:t},running:{get:s}})};n.prototype.addCommand=function(t){if(void 0===t)return Promise.resolve();var n=e.get(this),s=new Promise(function(e,i){n.elements.push({command:t,resolve:e,reject:i})});return n.running||(n.running=!0,i.call(n)),s};var i=function t(){var e,n;if(void 0!==(e=this.elements.shift())){try{n=this.callback(this.context,e.command)}catch(n){e.reject(n),t.call(this)}null!=n&&"function"==typeof n.then?n.then(n=>{e.resolve(n),t.call(this)},n=>{e.reject(n),t.call(this)}):(e.resolve(n),t.call(this))}else this.running=!1},s=function(){return e.get(this).running};StyledElements.CommandQueue=n}(StyledElements.Utils),function(t,e){"use strict";t.Container=function(s,l){s=e.merge(e.clone(i),s),t.StyledElement.call(this,l),this.wrapperElement=document.createElement(s.tagname),this.wrapperElement.className="se-container",s.id&&this.wrapperElement.setAttribute("id",s.id),this.addClassName(s.class);var r={children:[]};n.set(this,r),Object.defineProperties(this,{children:{get:function(){return r.children.slice(0)}}})},e.inherit(t.Container,t.StyledElement,{has:function(e){var i=n.get(this);return e instanceof t.StyledElement&&-1!==i.children.indexOf(e)||e.parentElement===this.get()},appendChild:function(t,n){return e.appendChild(this,t,n).forEach(s,this),l.call(this),this},prependChild:function(t,n){return e.prependChild(this,t,n).forEach(s,this),l.call(this),this},removeChild:function(i){if(e.removeChild(this,i),i instanceof t.StyledElement){var s=n.get(this);s.children.splice(s.children.indexOf(i),1)}return this},repaint:function(t){t=void 0!==t&&t;for(var e=n.get(this),i=0;i<e.children.length;i++)e.children[i].repaint(t)},clear:function(){var t=n.get(this);return t.children=[],this.wrapperElement.innerHTML="",this.wrapperElement.scrollTop=0,this.wrapperElement.scrollLeft=0,null!=t.disabledLayer&&this.wrapperElement.appendChild(t.disabledLayer),this},text:function(t){return null==t?this.get().textContent:this.clear().appendChild(""+t)},isDisabled:function(){return!this.enabled},_onenabled:function(t){var e,i;i=n.get(this),t?(null!=i.disabledLayer&&i.disabledLayer.remove(),i.disabledLayer=null):(i.disabledLayer=document.createElement("div"),i.disabledLayer.className="se-container-disable-layer",(e=document.createElement("i")).className="disable-icon fa fa-spin fa-spinner",i.disabledLayer.appendChild(e),this.wrapperElement.appendChild(i.disabledLayer))}});var n=new WeakMap,i={class:"",id:"",tagname:"div",useFullHeight:!1},s=function(e){var i=n.get(this);e instanceof t.StyledElement&&(-1===i.children.indexOf(e)&&i.children.push(e))},l=function(){var t,e=[];t=n.get(this),Array.prototype.forEach.call(this.get().childNodes,function(n){var i,s=!1;for(i=0;i<t.children.length&&!s;i++)t.children[i].get()===n&&(e.push(t.children.splice(i,1)[0]),s=!0)}),t.children=e}}(StyledElements,StyledElements.Utils),function(t){"use strict";var e=function(t){t=StyledElements.Utils.merge({class:"",exclusive:!0,full:!0},t),this.exclusive=t.exclusive,this.full=t.full,this.children=[],this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord(t.class,"styled_accordion")};t.inherit(e,StyledElements.StyledElement),e.prototype.createContainer=function(e){var n;return e=t.merge({listenOnTitle:!0},e),(n=new StyledElements.Expander(e)).insertInto(this.wrapperElement),this.exclusive?n.addEventListener("expandChange",function(t,e){var n;e?(n=this.currentContainer,this.currentContainer=t,n&&(n.setExpanded(!1),n.wrapperElement.style.height="")):this.currentContainer===t&&(t.wrapperElement.style.height="",this.currentContainer=null),this.repaint()}.bind(this)):this.full&&n.addEventListener("expandChange",function(t){this.repaint()}.bind(this)),this.children.push(n),null==this.currentContainer&&n.setExpanded(!0),n},e.prototype.repaint=function(t){var e,n,i;if(null!=(e=this._getUsableHeight())&&null!=this.currentContainer){for(i=0;i<this.children.length;i+=1)this.children[i]!==this.currentContainer&&(n=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null),e-=this.children[i].wrapperElement.offsetHeight,e-=n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX));e-=(n=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null)).getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),this.currentContainer.wrapperElement.style.height=e+"px",this.currentContainer.repaint(t)}},e.prototype.destroy=function(){var t;for(t=0;t<this.children.length;t+=1)this.children[t].destroy();this.children=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Accordion=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){if(!(e=t.merge({buttonFloat:"left",class:"",expandButton:!0,listenOnTitle:!1,state:"default",title:null},e)).expandButton&&!e.listenOnTitle)throw new TypeError;StyledElements.StyledElement.call(this,["expandChange"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord("panel se-expander",e.class),null!=e.state&&""!==e.state.trim()&&this.addClassName("panel-"+e.state);var n=document.createElement("div");n.className="panel-heading",this.wrapperElement.appendChild(n),this.toggleButton=null,e.expandButton&&(this.toggleButton=new StyledElements.ToggleButton({class:"icon-expand",plain:!0}),this.toggleButton.insertInto(n)),this.titleContainer=new StyledElements.Container({class:"title"}),this.titleContainer.insertInto(n),e.title&&this.titleContainer.appendChild(document.createTextNode(e.title)),this.contentContainer=new StyledElements.Container({class:"panel-body"}),this.contentContainer.insertInto(this.wrapperElement);var i=function(){this.setExpanded(!this.isExpanded())}.bind(this);this.toggleButton&&this.toggleButton.addEventListener("click",i),e.listenOnTitle&&(this.titleContainer.wrapperElement.style.cursor="pointer",this.titleContainer.wrapperElement.addEventListener("click",i,!1))};t.inherit(e,StyledElements.StyledElement),e.prototype.repaint=function(t){var e,n;if(this.isExpanded()){if(null==(e=this.wrapperElement.clientHeight))return;n=document.defaultView.getComputedStyle(this.titleContainer.wrapperElement,null),e-=this.titleContainer.wrapperElement.offsetHeight,e-=n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=(n=document.defaultView.getComputedStyle(this.contentContainer.wrapperElement,null)).getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),e-=n.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),(e-=n.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX))<0&&(e=0),this.contentContainer.wrapperElement.style.height=e+"px",this.contentContainer.repaint(t)}},e.prototype.isExpanded=function(){return this.hasClassName("expanded")},e.prototype.setExpanded=function(t){t=!!t,this.isExpanded()!==t&&(t?this.addClassName("expanded"):(this.removeClassName("expanded"),this.contentContainer.wrapperElement.style.height=""),this.toggleButton&&(this.toggleButton.active=t),this.dispatchEvent("expandChange",t))},e.prototype.getTitleContainer=function(){return this.titleContainer},e.prototype.appendChild=function(t){this.contentContainer.appendChild(t)},e.prototype.removeChild=function(t){this.contentContainer.removeChild(t)},e.prototype.clear=function(){this.contentContainer.clear()},StyledElements.Expander=e}(StyledElements.Utils),function(t,e){"use strict";t.Fragment=function(e){t.StyledElement.call(this),this.children=[],Array.isArray(e)?e.forEach(function(t){this.appendChild(t)}.bind(this)):this.appendChild(e),Object.defineProperties(this,{elements:{get:function(){return this.children}}})},e.inherit(t.Fragment,t.StyledElement,{appendChild:function(e){return null==e?this:("string"==typeof e?this.children=this.children.concat(n(e)):e instanceof t.Fragment?this.children=this.children.concat(e.children):this.children.push(e),this)},appendTo:function(t,n){return this.children.forEach(function(i){e.appendChild(t,i,n)}),this},repaint:function(){return this.children.forEach(function(t){"function"==typeof t.repaint&&t.repaint()}),this}});var n=function(t){var e,n=[];return t.length&&((e=document.createElement("div")).innerHTML=t,n=Array.prototype.slice.call(e.childNodes)),n}}(StyledElements,StyledElements.Utils),function(t){"use strict";var e,n,i;n=function(t,e){var n=l.get(this);"function"==typeof n.options.processFunc&&n.options.processFunc(t,e),n.currentPage=parseInt(e.current_page,10),n.currentElements=t,n.totalCount!==e.total_count&&(n.totalCount=e.total_count,s.call(this),this.dispatchEvent("paginationChanged")),this.dispatchEvent("requestEnd")},i=function(t){l.get(this).currentElements=[],null==t&&(t={message:"unknown cause"}),this.dispatchEvent("requestEnd",t)},e=function(e){StyledElements.ObjectWithEvents.call(this,["optionsChanged","paginationChanged","requestStart","requestEnd"]);var n={};l.set(this,n),Object.defineProperties(this,{currentPage:{get:function(){return n.currentPage}},options:{get:function(){return n.options}},totalCount:{get:function(){return n.totalCount}},totalPages:{get:function(){return n.totalPages}},currentElements:{get:function(){return n.currentElements}}}),n.options=t.merge({pageSize:25,requestFunc:null,processFunc:null},e),n.currentPage=1,n.currentElements=[],n.totalPages=1},t.inherit(e,StyledElements.ObjectWithEvents),e.prototype.getCurrentPage=function(){return this.currentElements},e.prototype.changeOptions=function(t){var e,n,i,r=!1,o=l.get(this);if("object"==typeof t){for(i in t)"pageSize"===i?(e=parseInt(t.pageSize,10),isNaN(e)||e===o.options.pageSize||(r=!0,n=(o.currentPage-1)*o.options.pageSize,o.currentPage=Math.floor(n/e)+1,o.options.pageSize=e,s.call(this))):(r=!0,o.options[i]=t[i],o.currentPage=1);return r&&(this.dispatchEvent("optionsChanged",o.options),this.refresh()),this}},e.prototype.goToFirst=function(){return this.changePage(0)},e.prototype.goToPrevious=function(){var t=l.get(this);return this.changePage(t.currentPage-1)},e.prototype.goToNext=function(){var t=l.get(this);return this.changePage(t.currentPage+1)},e.prototype.goToLast=function(){var t=l.get(this);this.changePage(t.totalPages)};var s=function(){var t=l.get(this);0===t.options.pageSize?t.totalPages=1:(t.totalPages=Math.ceil(t.totalCount/t.options.pageSize),t.totalPages<=0&&(t.totalPages=1))};e.prototype.refresh=function(){var t=l.get(this);this.dispatchEvent("requestStart"),t.options.requestFunc(t.currentPage,t.options,n.bind(this),i.bind(this))},e.prototype.changePage=function(t){var e=l.get(this);t<1?t=1:t>e.totalPages&&(t=e.totalPages),this.dispatchEvent("requestStart"),e.options.requestFunc(t,e.options,n.bind(this),i.bind(this))};var l=new WeakMap;StyledElements.PaginatedSource=e}(StyledElements.Utils),function(t){"use strict";var e,n,i,s,l,r,o,a,u;a="http://wirecloud.conwet.fi.upm.es/StyledElements",u="http://wirecloud.conwet.fi.upm.es/Template",n=function(e,n,i){var s,l,o;if("function"==typeof(l=n[e.localName])){if(""!==(s=e.textContent.trim()))try{s=JSON.parse(s)}catch(t){s={}}else s={};t.merge(s,r(e)),o=l(s,n,i)}else o=l;return o=o instanceof StyledElements.StyledElement||t.isElement(o)?o:null!=o?e.ownerDocument.createTextNode(o):e.ownerDocument.createTextNode("")},i=function t(e,i,s,l){var r,o,h;for(r=0;r<i.childNodes.length;r+=1)(o=i.childNodes[r]).nodeType===Node.ELEMENT_NODE&&(o.namespaceURI===a?(e.build(o,s,l).insertInto(i,o),i.removeChild(o)):o.namespaceURI===u?((h=n(o,s,l))instanceof StyledElements.StyledElement?h.insertInto(i,o):i.insertBefore(h,o),i.removeChild(o)):t(e,o,s,l))},s=function(t,e,s,l){var r,o,h,c;for(o=Array.prototype.slice.call(e.childNodes,0),r=0;r<o.length;r+=1)(h=o[r])instanceof Element&&(h.namespaceURI===a?(c=t.build(h,s,l),o[r]=c):h.namespaceURI===u?o[r]=n(h,s,l):i(t,h,s,l));return new StyledElements.Fragment(o)},r=function(t){var e,n={};for(e=0;e<t.attributes.length;e++)n[t.attributes[e].localName]=t.attributes[e].nodeValue;return n},l=function(t){var e,n;if(e={},null!=(n=t.ownerDocument.evaluate("s:options",t,function(){return a},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)){n.parentNode.removeChild(n);try{e=JSON.parse(n.textContent)}catch(t){}}return e},o=function(e,n,i,o,u,h){var c,p,d;null!=(c=n.getElementsByTagNameNS(a,i)[0])&&(null!=(d=t.merge(l(c),r(c)))&&"class"in d&&o.addClassName(d.class),p=s(e,c,u,h),o.appendChild(p))},(e=function(){var e={borderlayout:function(t,e,n,i,s){var l=new StyledElements.BorderLayout(n);return o(t,e,"northcontainer",l.north,i,s),o(t,e,"westcontainer",l.west,i,s),o(t,e,"centercontainer",l.center,i,s),o(t,e,"eastcontainer",l.east,i,s),o(t,e,"southcontainer",l.south,i,s),l},button:function(e,n,i){return(i=t.merge({},i)).text=n.textContent,new StyledElements.Button(i)},horizontallayout:function(t,e,n,i,s){var l=new StyledElements.HorizontalLayout(n);return o(t,e,"westcontainer",l.west,i,s),o(t,e,"centercontainer",l.center,i,s),o(t,e,"eastcontainer",l.east,i,s),l},select:function(t,e,n){return new StyledElements.Select(n)},verticallayout:function(t,e,n,i,s){var l=new StyledElements.VerticalLayout(n);return o(t,e,"northcontainer",l.north,i,s),o(t,e,"centercontainer",l.center,i,s),o(t,e,"southcontainer",l.south,i,s),l}};this.build=function(n,i,s){return(0,e[n.localName])(this,n,t.merge(l(n),r(n)),i,s)}}).prototype.DEFAULT_OPENING='<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml">',e.prototype.DEFAULT_CLOSING="</s:styledgui>",e.prototype.parse=function(t,e,n){if("string"==typeof t&&(t=(new DOMParser).parseFromString(t,"application/xml")),!(t instanceof Document))throw new TypeError("document is not a Document or cannot be parsed into a Document");return s(this,t.documentElement,e,n)},StyledElements.GUIBuilder=e}(StyledElements.Utils),function(t){"use strict";var e=new StyledElements.GUIBuilder,n=function(t,e){switch(this.element.classList.remove("top","right","bottom","left"),e){case"top":this.element.classList.add("top"),this.element.style.left=t.left+(t.width-this.element.offsetWidth)/2+"px",this.element.style.top=t.top-this.element.offsetHeight+"px";break;case"right":this.element.classList.add("right"),this.element.style.left=t.right+"px",this.element.style.top=t.top+(t.height-this.element.offsetHeight)/2+"px";break;case"bottom":this.element.classList.add("bottom"),this.element.style.left=t.left+(t.width-this.element.offsetWidth)/2+"px",this.element.style.top=t.bottom+"px";break;case"left":this.element.classList.add("left"),this.element.style.left=t.left-this.element.offsetWidth+"px",this.element.style.top=t.top+(t.height-this.element.offsetHeight)/2+"px"}},i=function(){var t=this.element.parentElement.getBoundingClientRect(),e=this.element.getBoundingClientRect(),n=e.width-Math.max(e.right-t.right,0)-Math.max(t.left-e.left,0),i=e.height-Math.max(e.bottom-t.bottom,0)-Math.max(t.top-e.top,0);return e.width*e.height-n*i},s=function(t,e){var s=0,l=[];do{n.call(this,t,e[s]),l.push(i.call(this)),s+=1}while(l[s-1]>0&&s<e.length);l[s-1]>0&&function(t,e,i){var s=Math.min.apply(Math,e),l=i[e.indexOf(s)];n.call(this,t,l);var r=this.element.parentElement.getBoundingClientRect(),o=this.element.getBoundingClientRect();o.bottom>r.bottom&&(this.element.style.top="",this.element.style.bottom="10px",o=this.element.getBoundingClientRect()),o.top<r.top&&(this.element.style.top="10px")}.call(this,t,l,e)},l=function(n){return"Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerTooltip(this),this.visible?(this.element.classList.add("in"),void this.repaint()):("getBoundingClientRect"in n&&(n=n.getBoundingClientRect()),this.element=e.parse('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="tooltip fade" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"><t:content/></div></div></s:styledgui>',{content:this.options.content}).elements[0],this.element.addEventListener("transitionend",o.bind(this)),(t.getFullscreenElement()||document.body).appendChild(this.element),s.call(this,n,this.options.placement),this.element.classList.add("in"),this)},r=function(e){Object.defineProperty(this,"options",{value:t.merge({content:"",class:"",placement:["right","bottom","left","top"]},e)}),StyledElements.StyledElement.call(this,[]),Object.defineProperties(this,{element:{value:null,writable:!0},visible:{get:function(){return null!=this.element}}})};t.inherit(r,StyledElements.StyledElement),r.prototype.destroy=function(){this.hide()},r.prototype.bind=function(t){t.addEventListener("focus",this.show.bind(this,t),!1),t.addEventListener("blur",this.hide.bind(this),!1),t.addEventListener("mouseenter",this.show.bind(this,t),!1),t.addEventListener("mouseleave",this.hide.bind(this),!1),t.addEventListener("click",this.hide.bind(this),!1)},r.prototype.toggle=function(t){return this.visible?this.hide():l.call(this,t)},r.prototype.show=function(t){return l.call(this,t)};var o=function(){null==this.element||this.element.classList.contains("in")||(this.element.remove(),this.element=null,"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterTooltip(this))};r.prototype.hide=function(){var t;return this.visible?(t=!this.element.classList.contains("in")||"0"===getComputedStyle(this.element).getPropertyValue("opacity"),this.element.classList.remove("in"),t&&o.call(this),this):this},StyledElements.Tooltip=r}(StyledElements.Utils),function(t,e){"use strict";t.Alert=function(i){i=e.merge(e.clone(n),i),t.StyledElement.call(this),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="alert",null!=i.state&&""!==i.state.trim()&&this.addClassName("alert-"+i.state),i.alignment&&this.addClassName("se-alert-"+i.alignment),this.addClassName(i.class),this.heading=new t.Container({class:"se-alert-heading"}),this.heading.appendChild(i.title).insertInto(this.wrapperElement),this.body=new t.Container({class:"se-alert-body"}),this.body.appendChild(i.message).insertInto(this.wrapperElement)},e.inherit(t.Alert,t.StyledElement,{addNote:function(t){var e=document.createElement("blockquote");return t instanceof StyledElements.StyledElement?t.appendTo(e):e.innerHTML=t,this.body.appendChild(e),e}});var n={state:"warning",alignment:"",class:"",title:"",message:""}}(StyledElements,StyledElements.Utils),function(t,e){"use strict";var n=new WeakMap,i=function(i){i=e.merge({text:null,title:"",class:""},i),t.Container.call(this,[]),this.wrapperElement=document.createElement("span"),this.wrapperElement.className="se-add-on",this.addClassName(i.class),n.set(this,{related_input:null}),this.setTitle(i.title),this.setLabel(i.text),this._clickCallback=function(t){t.preventDefault(),t.stopPropagation();var e=n.get(this);this.enabled&&e.related_input&&e.related_input.focus()}.bind(this),this.wrapperElement.addEventListener("mousedown",e.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!0)};e.inherit(i,t.Container),i.prototype.Tooltip=t.Tooltip,i.prototype.setLabel=function(t){return this.wrapperElement.textContent=t,this},i.prototype.setTitle=function(t){var e=n.get(this);return null==t||""===t?null!=e.tooltip&&(e.tooltip.destroy(),e.tooltip=null):(null==e.tooltip&&(e.tooltip=new this.Tooltip({content:t,placement:["bottom","top","right","left"]}),e.tooltip.bind(this.wrapperElement)),e.tooltip.options.content=t),this},i.prototype.assignInput=function(t){return n.get(this).related_input=t,this},i.prototype.destroy=function(){this.wrapperElement.removeEventListener("mousedown",e.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),delete this._clickCallback,t.StyledElement.prototype.destroy.call(this)},t.Addon=i}(StyledElements,StyledElements.Utils),function(t,e){"use strict";var n=function(){this.enabled?this.wrapperElement.setAttribute("tabindex",this.tabindex):this.wrapperElement.setAttribute("tabindex",-1)},i=function(i){var u,h,c;i=e.merge(e.clone(s),i),t.StyledElement.call(this,l),i.usedInForm?(this.wrapperElement=document.createElement("button"),this.wrapperElement.setAttribute("type","button")):this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-btn",this.label=null,this.icon=null,this.badgeElement=null,this.tooltip=null,this.addClassName(i.class),""!==i.id.trim()&&this.wrapperElement.setAttribute("id",i.id),i.plain&&this.addClassName("plain"),this.addIconClassName(i.iconClass),this.setLabel(i.text),this.setTitle(i.title),i.iconClass&&i.stackedIconClass&&(this.stackedIcon=document.createElement("span"),this.stackedIcon.className=[i.stackedIconClass,"se-stacked-icon",i.stackedIconPlacement].join(" "),this.icon.appendChild(this.stackedIcon)),Object.defineProperties(this,{depth:{get:function(){return c},set:function(t){c=a.call(this,c,t)}},state:{get:function(){return r.call(this,h)},set:function(t){h=o.call(this,h,t)}},tabindex:{get:function(){return u},set:function(t){u=t,n.call(this)}}}),this.state=i.state,this.depth=i.depth,this.tabindex=i.tabindex;var p=Object.getPrototypeOf(this);"function"==typeof p._clickCallback?this._clickCallback=p._clickCallback.bind(this):this._clickCallback=function(t){null!=this.inputElement&&t.target===this.inputElement||(t.preventDefault(),t.stopPropagation(),this.enabled&&(null!=this.inputElement&&this.inputElement.click(),this.dispatchEvent("click")))}.bind(this),this._onkeydown_bound=function(t){var n;this.enabled&&((n=e.extractModifiers(t)).preventDefault=t.preventDefault.bind(t),n.stopPropagation=t.stopPropagation.bind(t),this._onkeydown(n,e.normalizeKey(t)))}.bind(this),this.wrapperElement.addEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!1),this.wrapperElement.addEventListener("dblclick",function(t){t.preventDefault(),t.stopPropagation(),this.enabled&&this.dispatchEvent("dblclick")}.bind(this),!0),this.wrapperElement.addEventListener("keydown",this._onkeydown_bound,!1),this.wrapperElement.addEventListener("focus",function(){this.dispatchEvent("focus")}.bind(this),!0),this.wrapperElement.addEventListener("blur",function(){this.dispatchEvent("blur")}.bind(this),!0),this.wrapperElement.addEventListener("mouseenter",function(){this.dispatchEvent("mouseenter")}.bind(this),!1),this.wrapperElement.addEventListener("mouseleave",function(){this.dispatchEvent("mouseleave")}.bind(this),!1)};StyledElements.Utils.inherit(i,StyledElements.StyledElement),i.prototype.Tooltip=StyledElements.Tooltip,i.prototype._onenabled=function(t){return n.call(this),t||this.blur(),this},i.prototype._onkeydown=function(t,e){switch(e){case" ":case"Enter":this._clickCallback(t)}},i.prototype.focus=function(){return this.wrapperElement.focus(),this},i.prototype.blur=function(){return this.wrapperElement.blur(),this},i.prototype.setLabel=function(t){return t?h.call(this,t):u.call(this)},i.prototype.clearClassName=function(){return this.wrapperElement.className="se-btn",this},i.prototype.addIconClassName=function(t){if(!Array.isArray(t)){if(""===(t=null==t?"":t.toString().trim()))return this;t=t.split(/\s+/)}return 0===t.length?this:(null==this.icon&&(this.icon=document.createElement("i"),this.icon.classList.add("se-icon"),this.wrapperElement.appendChild(this.icon)),t.forEach(function(t){this.icon.classList.add(t)},this),this)},i.prototype.removeIconClassName=function(t){if(null==this.icon)return this;if(!Array.isArray(t)){if(""===(t=null==t?"":t.toString().trim()))return this.icon.remove(),this.icon=null,this;t=t.split(/\s+/)}return t.forEach(function(t){this.icon.classList.remove(t)},this),"se-icon"===this.icon.className.trim()&&(this.icon.remove(),this.icon=null),this},i.prototype.replaceIconClassName=function(t,e){return this.removeIconClassName(t),this.addIconClassName(e)},i.prototype.setTitle=function(t){return null==t||""===t?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:t,placement:["bottom","top","right","left"]}),this.tooltip.bind(this)),this.tooltip.options.content=t),this},i.prototype.click=function(){return this.enabled&&this.dispatchEvent("click"),this},i.prototype.destroy=function(){this.wrapperElement.removeEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),this.wrapperElement.removeEventListener("keydown",this._onkeydown_bound,!1),delete this._clickCallback,delete this._onkeydown_bound,StyledElements.StyledElement.prototype.destroy.call(this)},i.prototype.setBadge=function(t,e,n){return t?c.call(this,t,e,!!n):p.call(this)},StyledElements.Button=i;var s={id:"",class:"",iconClass:"",stackedIconClass:"",state:"",plain:!1,usedInForm:!1,text:"",depth:null,title:"",stackedIconPlacement:"bottom-right",tabindex:0},l=["blur","click","dblclick","focus","mouseenter","mouseleave"],r=function(t){return t},o=function(t,e){return-1!==["default","primary","success","info","warning","danger"].indexOf(e)?e!==t&&(t&&this.removeClassName("btn-"+t),t=e,this.addClassName("btn-"+t)):(t&&this.removeClassName("btn-"+t),t=""),t},a=function(t,e){return"number"==typeof e&&e>=0&&e<=5?e!==t&&(t>=0&&this.removeClassName("z-depth-"+t),t=e,this.addClassName("z-depth-"+t)):(null!=t&&this.removeClassName("z-depth-"+t),t=null),t},u=function(){return null!=this.label&&(this.label.remove(),this.label=null),this},h=function(t){return null==this.label&&(this.label=document.createElement("span"),this.wrapperElement.appendChild(this.label)),this.label.textContent=t,this},c=function(t,e,n){return null==this.badgeElement&&(this.badgeElement=document.createElement("span"),this.wrapperElement.insertBefore(this.badgeElement,this.wrapperElement.firstChild)),this.badgeElement.className="badge",-1!==["inverse","primary","success","info","warning","danger"].indexOf(e)&&this.badgeElement.classList.add("badge-"+e),this.badgeElement.classList.add("z-depth-"+(this.depth+1)),this.toggleClassName("has-alert",n),this.badgeElement.textContent=t,this},p=function(){return null!=this.badgeElement&&(this.badgeElement.remove(),this.badgeElement=null),this.removeClassName("has-alert"),this}}(StyledElements,StyledElements.Utils),function(t){"use strict";var e,n;n=function(){this.inputElement.files&&(this.dispatchEvent("fileselect",this.inputElement.files),this.inputElement.value="")},e=function(e){e=t.merge({multiple:!0},e),StyledElements.Button.call(this,e),Object.defineProperty(this,"inputElement",{value:document.createElement("input")}),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex","-1"),this.inputElement.multiple=e.multiple,this.wrapperElement.appendChild(this.inputElement),this.events.fileselect=new StyledElements.Event,this._onchange=n.bind(this),this.inputElement.addEventListener("change",this._onchange,!0)},t.inherit(e,StyledElements.Button),e.prototype.destroy=function(){this.inputElement.removeEventListener("change",this._onchange,!0),delete this._onchange,StyledElements.Button.prototype.destroy.call(this)},StyledElements.FileButton=e}(StyledElements.Utils),function(t,e){"use strict";var n=["left-bottom","right-bottom","top-left","top-right","bottom-right","bottom-left"];Object.freeze(n);var i=["bottom-left","bottom-right","top-left","top-right"];Object.freeze(i);var s=function(t,e){var i=0;for(i=0;i<n.length;i++)this.wrapperElement.classList.remove("se-popup-menu-"+n[i]);switch(this.wrapperElement.classList.add("se-popup-menu-"+e),e){case"left-bottom":this.wrapperElement.style.left=t.left-this.wrapperElement.offsetWidth+1+"px",this.wrapperElement.style.top=t.top-1+"px";break;case"right-bottom":this.wrapperElement.style.left=t.right-1+"px",this.wrapperElement.style.top=t.top-1+"px";break;case"top-left":this.wrapperElement.style.top=t.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=t.left+"px";break;case"top-right":this.wrapperElement.style.top=t.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=t.right-this.wrapperElement.offsetWidth+"px";break;case"bottom-right":this.wrapperElement.style.top=t.bottom-1+"px",this.wrapperElement.style.left=t.right-this.wrapperElement.offsetWidth+"px";break;default:case"bottom-left":this.wrapperElement.style.top=t.bottom-1+"px",this.wrapperElement.style.left=t.left+"px"}},l=function(){var t=this.wrapperElement.parentElement.getBoundingClientRect(),e=this.wrapperElement.getBoundingClientRect(),n=e.width-Math.max(e.right-t.right,0)-Math.max(t.left-e.left,0),i=e.height-Math.max(e.bottom-t.bottom,0)-Math.max(t.top-e.top,0);return e.width*e.height-n*i},r=function(t){t=StyledElements.Utils.merge({oneActiveAtLeast:!1,placement:null,useRefElementWidth:!1},t),StyledElements.ObjectWithEvents.call(this,["itemOver","visibilityChange","click"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu hidden",this._context=null,"position"in t?Array.isArray(t.position)?this._placement=t.position:"string"==typeof t.position?this._placement=[t.placement]:this._placement=i:Array.isArray(t.placement)?this._placement=t.placement:"string"==typeof t.placement?this._placement=[t.placement]:this._placement=i,Object.defineProperties(this,{activeItem:{get:u},firstEnabledItem:{get:h},hidden:{get:p},lastEnabledItem:{get:c},oneActiveAtLeast:{value:t.oneActiveAtLeast},useRefElementWidth:{value:t.useRefElementWidth}}),this._items=[],this._dynamicItems=[],this._submenus=[],this._menuItemCallback=this._menuItemCallback.bind(this),this._menuItem_onactivate_bound=f.bind(this),this._menuItem_ondeactivate_bound=E.bind(this),this._menuItem_onfocus_bound=y.bind(this),this._menuItem_onblur_bound=b.bind(this)};e.inherit(r,StyledElements.ObjectWithEvents);var o=function(t,e){if(t instanceof StyledElements.MenuItem)t.addEventListener("click",this._menuItemCallback),t.addEventListener("mouseenter",this._menuItem_onactivate_bound),t.addEventListener("mouseleave",this._menuItem_ondeactivate_bound),t.addEventListener("focus",this._menuItem_onfocus_bound),t.addEventListener("blur",this._menuItem_onblur_bound);else if(t instanceof StyledElements.SubMenuItem)t.addEventListener("click",this._menuItemCallback),t.menuItem.addEventListener("mouseenter",this._menuItem_onactivate_bound),t.menuItem.addEventListener("mouseleave",this._menuItem_ondeactivate_bound),t.menuItem.addEventListener("focus",this._menuItem_onfocus_bound),t.menuItem.addEventListener("blur",this._menuItem_onblur_bound),t._setParentPopupMenu(this);else if(!(t instanceof StyledElements.DynamicMenuItems||t instanceof StyledElements.Separator))throw null!=t?new TypeError("Invalid chlid element"):new TypeError("The new child element is null");e.push(t)};r.prototype.append=function(t){o.call(this,t,this._items),this.isVisible()&&(a.call(this,t),this._enabledItems.length>0&&this.oneActiveAtLeast&&d.call(this,this._enabledItems[0]))},r.prototype.appendSeparator=function(){this.append(new StyledElements.Separator)},r.prototype.clear=function(){var t;for(this.hidden||m.call(this),t=0;t<this._items.length;t++)this._items[t].removeEventListener("click",this._menuItemCallback);return this._items=[],this},r.prototype.setContext=function(t){this._context=t},r.prototype._menuItemCallback=function(t){this.dispatchEvent("click",t),t.hasClassName("submenu")||this.hide(),"function"==typeof t.run&&t.run(this._context,t.context)},r.prototype.isVisible=function(){return!this.hidden};var a=function(t){var e,n,i;if(t instanceof StyledElements.DynamicMenuItems)for(n=t.build(this._context),e=0;e<n.length;e+=1)i=n[e],o.call(this,i,this._dynamicItems),i instanceof StyledElements.MenuItem||i instanceof StyledElements.Separator?(i.insertInto(this.wrapperElement),i.parentElement=this,i instanceof StyledElements.MenuItem&&i.enabled&&this._enabledItems.push(i)):i instanceof StyledElements.SubMenuItem&&(i._getMenuItem().insertInto(this.wrapperElement),i.parentElement=this,this._enabledItems.push(i.menuItem));else t instanceof StyledElements.MenuItem||t instanceof StyledElements.Separator?(t.insertInto(this.wrapperElement),t.parentElement=this,t instanceof StyledElements.MenuItem&&t.enabled&&this._enabledItems.push(t)):t instanceof StyledElements.SubMenuItem?(t._getMenuItem().insertInto(this.wrapperElement),t._getMenuItem().parentElement=this,this._submenus.push(t),this._enabledItems.push(t.menuItem)):this.wrapperElement.appendChild(t)};r.prototype.show=function(t){var n;if(!this.isVisible()){for(this._enabledItems=[],this._activeMenuItem=null,this._focusedMenuItem=null,n=0;n<this._items.length;n+=1)a.call(this,this._items[n]);if(this._enabledItems.length>0&&this.oneActiveAtLeast&&d.call(this,this._enabledItems[0]),this.wrapperElement.classList.remove("hidden"),(e.getFullscreenElement()||document.body).appendChild(this.wrapperElement),"Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerPopup(this),this.dispatchEvent("visibilityChange"),!("left"in t)&&"x"in t&&"y"in t)this.wrapperElement.style.top=t.y+"px",this.wrapperElement.style.left=t.x+"px";else{n=0;var i=[];do{s.call(this,t,this._placement[n]),i.push(l.call(this)),n+=1}while(i[n-1]>0&&n<this._placement.length);i[n-1]>0&&function(t,e,n){var i=Math.min.apply(Math,e),l=n[e.indexOf(i)];s.call(this,t,l);var r=this.wrapperElement.parentElement.getBoundingClientRect(),o=this.wrapperElement.getBoundingClientRect();o.bottom>r.bottom&&(this.wrapperElement.style.top="",this.wrapperElement.style.bottom="10px",o=this.wrapperElement.getBoundingClientRect()),o.top<r.top&&(this.wrapperElement.style.top="10px")}.call(this,t,i,this._placement)}this.useRefElementWidth&&(this.wrapperElement.style.width=t.width+"px")}},r.prototype.moveCursorDown=function(){var t;return this.hasEnabledItem()?(null!=this._activeMenuItem?(this._activeMenuItem.deactivate(),(t=this._enabledItems.indexOf(this._activeMenuItem))!==this._enabledItems.length-1?this._activeMenuItem=this._enabledItems[t+1]:this._activeMenuItem=this.firstEnabledItem):this._activeMenuItem=this.firstEnabledItem,this._activeMenuItem.activate(),this.dispatchEvent("itemOver",this._activeMenuItem),this):this},r.prototype.moveCursorUp=function(){var t;return this.hasEnabledItem()?(null!=this._activeMenuItem?(this._activeMenuItem.deactivate(),t=this._enabledItems.indexOf(this._activeMenuItem),this._activeMenuItem=0!==t?this._enabledItems[t-1]:this.lastEnabledItem):this._activeMenuItem=this.lastEnabledItem,this._activeMenuItem.activate(),this.dispatchEvent("itemOver",this._activeMenuItem),this):this},r.prototype.moveFocusDown=function(){var t;return this.hasEnabledItem()?(null!=this._focusedMenuItem&&(t=this._enabledItems.indexOf(this._focusedMenuItem))!==this._enabledItems.length-1?this._enabledItems[t+1].focus():this.firstEnabledItem.focus(),this):this},r.prototype.moveFocusUp=function(){var t;return this.hasEnabledItem()?(null!=this._focusedMenuItem&&0!==(t=this._enabledItems.indexOf(this._focusedMenuItem))?this._enabledItems[t-1].focus():this.lastEnabledItem.focus(),this):this},r.prototype.hide=function(){return this.hidden?this:(this.wrapperElement.classList.add("hidden"),this.wrapperElement.style.bottom="",m.call(this),this.wrapperElement.remove(),"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterPopup(this),this.dispatchEvent("visibilityChange"))},r.prototype.destroy=function(){var t,e;for(this.hide(),t=0;t<this._items.length;t+=1)(e=this._items[t])instanceof StyledElements.MenuItem&&e.destroy();this._items=null,this._menuItemCallback=null,this._context=null,StyledElements.ObjectWithEvents.prototype.destroy.call(this)},r.prototype.hasEnabledItem=function(){return!this.hidden&&this._enabledItems.length>0};var u=function(){return this.hidden?null:this._activeMenuItem},h=function(){return this.hasEnabledItem()?this._enabledItems[0]:null},c=function(){return this.hasEnabledItem()?this._enabledItems[this._enabledItems.length-1]:null},p=function(){return null==this.wrapperElement.parentElement},d=function(t){this._activeMenuItem=t.activate(),this.dispatchEvent("itemOver",t)},m=function(){var e,n;for(e=this._submenus.length-1;e>=0;e--)this._submenus[e].hide(),this._submenus.splice(e,1);for(e=this._dynamicItems.length-1;e>=0;e--)(n=this._dynamicItems[e])instanceof t.SubMenuItem&&n.hide(),n.destroy(),this._dynamicItems.splice(e,1);this._enabledItems=[],this._activeMenuItem=null,this.wrapperElement.innerHTML=""},f=function(t){var e;for(e=0;e<this._enabledItems.length;e++)this._enabledItems[e].deactivate();d.call(this,t)},E=function(t){this.oneActiveAtLeast?this._activeMenuItem!==t&&t.deactivate():(this._activeMenuItem===t&&(this._activeMenuItem=null),t.deactivate())},y=function(t){this._focusedMenuItem=t},b=function(t){this._focusedMenuItem===t&&(this._focusedMenuItem=null)};StyledElements.PopupMenuBase=r}(StyledElements,StyledElements.Utils),function(t){"use strict";var e=function(t){StyledElements.PopupMenuBase.call(this,t),this._disableCallback=function(t){if(0===t.button){var e=this.wrapperElement.getBoundingClientRect();(t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom)&&setTimeout(this.hide.bind(this),0)}}.bind(this)};t.inherit(e,StyledElements.PopupMenuBase),e.prototype.show=function(t){return document.addEventListener("click",this._disableCallback,!0),StyledElements.PopupMenuBase.prototype.show.call(this,t),this},e.prototype.hide=function(){return StyledElements.PopupMenuBase.prototype.hide.call(this),document.removeEventListener("click",this._disableCallback,!0),document.removeEventListener("contextmenu",this._disableCallback,!0),this},e.prototype.destroy=function(){this._disableCallback=null,StyledElements.PopupMenuBase.prototype.destroy.call(this)},StyledElements.PopupMenu=e}(StyledElements.Utils),function(){"use strict";StyledElements.DynamicMenuItems=function(){},StyledElements.DynamicMenuItems.prototype.build=function(){return[]}}(),function(t,e){"use strict";t.MenuItem=function(e,d,m){t.StyledElement.call(this,n),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu-item",this.thumbnailElement=document.createElement("div"),this.thumbnailElement.className="se-popup-menu-item-thumbnail",this.bodyElement=document.createElement("div"),this.bodyElement.className="se-popup-menu-item-body",this.wrapperElement.appendChild(this.bodyElement),this.titleElement=document.createElement("div"),this.titleElement.className="se-popup-menu-item-title",this.bodyElement.appendChild(this.titleElement),Object.defineProperties(this,{active:{get:i,set:s},description:{get:l},title:{get:r}}),this.setTitle(e),this.run=d,this.context=m,this._onclick_bound=o.bind(this),this._onmouseenter_bound=a.bind(this),this._onmouseleave_bound=u.bind(this),this.wrapperElement.addEventListener("click",this._onclick_bound,!0),this.wrapperElement.addEventListener("mouseenter",this._onmouseenter_bound),this.wrapperElement.addEventListener("mouseleave",this._onmouseleave_bound),this._onblur_bound=h.bind(this),this._onfocus_bound=c.bind(this),this.wrapperElement.addEventListener("blur",this._onblur_bound),this.wrapperElement.addEventListener("focus",this._onfocus_bound),this._onenabled(!0),this._onkeydown_bound=p.bind(this),this.wrapperElement.addEventListener("keydown",this._onkeydown_bound)},e.inherit(t.MenuItem,t.StyledElement,{_onenabled:function(t){t?this.wrapperElement.setAttribute("tabindex",-1):this.wrapperElement.removeAttribute("tabindex")},activate:function(){return this.active=!0,this},addIconClass:function(t){return null==this.iconElement&&(this.iconElement=document.createElement("span"),this.thumbnailElement.appendChild(this.iconElement)),null==this.thumbnailElement.parentElement&&this.wrapperElement.insertBefore(this.thumbnailElement,this.wrapperElement.firstChild),this.iconElement.className="se-icon "+t,this},deactivate:function(){return this.active=!1,this},destroy:function(){null!=this.wrapperElement.parentElement&&this.wrapperElement.parentElement.removeChild(this.wrapperElement),this.wrapperElement.removeEventListener("click",this._onclick_bound,!0),this.wrapperElement.removeEventListener("mouseenter",this._onmouseenter_bound),this.wrapperElement.removeEventListener("mouseleave",this._onmouseleave_bound),this.wrapperElement.removeEventListener("keydown",this._onkeydown_bound),this.wrapperElement.removeEventListener("blur",this._onblur_bound),this.wrapperElement.removeEventListener("focus",this._onfocus_bound),this._onclick_bound=null,this._onmouseenter_bound=null,this._onmouseleave_bound=null,this._onkeydown_bound=null,this._onblur_bound=null,this._onfocus_bound=null,t.StyledElement.prototype.destroy.call(this)},focus:function(){return this.enabled&&!this.hasFocus()&&(this.wrapperElement.focus(),this.dispatchEvent("focus")),this},hasFocus:function(){return e.hasFocus(this.wrapperElement)},click:function(){return this.enabled&&this.dispatchEvent("click"),this},setDescription:function(e){return null==this.descriptionElement&&(this.descriptionElement=document.createElement("div"),this.descriptionElement.className="se-popup-menu-item-description",this.bodyElement.appendChild(this.descriptionElement)),e instanceof t.StyledElement?(this.descriptionElement.innerHTML="",e.appendTo(this.descriptionElement)):this.descriptionElement.textContent=e,this},setTitle:function(e){return e instanceof t.StyledElement?(this.titleElement.innerHTML="",e.appendTo(this.titleElement)):this.titleElement.textContent=e,this}});var n=["blur","click","focus","mouseenter","mouseleave"],i=function(){return this.hasClassName("active")},s=function(t){this.enabled&&this.active!==t&&this.toggleClassName("active",t)},l=function(){return null!=this.descriptionElement?this.descriptionElement.textContent:""},r=function(){return this.titleElement.textContent},o=function(t){t.stopPropagation(),this.click()},a=function(t){this.enabled&&this.dispatchEvent("mouseenter")},u=function(t){this.enabled&&this.dispatchEvent("mouseleave")},h=function(t){this.enabled&&this.dispatchEvent("blur")},c=function(t){this.enabled&&this.dispatchEvent("focus")},p=function(t){var n;switch(e.normalizeKey(t)){case" ":case"Enter":t.preventDefault(),this.click();break;case"Escape":case"ArrowLeft":t.stopPropagation(),t.preventDefault(),this.parentElement.hide(),this.parentElement instanceof StyledElements.SubMenuItem&&this.parentElement.menuItem.focus();break;case"ArrowUp":t.preventDefault(),this.parentElement.moveFocusUp();break;case"Tab":t.preventDefault(),n="submenu"in this&&this.submenu.isVisible()?this.submenu:this.parentElement,t.shiftKey?n.moveFocusUp():n.moveFocusDown();break;case"ArrowDown":t.preventDefault(),this.parentElement.moveFocusDown();break;case"ArrowRight":t.preventDefault(),"submenu"in this&&(this.submenu.show(this.getBoundingClientRect()),this.submenu.hasEnabledItem()&&this.submenu.moveFocusDown())}}}(StyledElements,StyledElements.Utils),function(t){"use strict";var e=function(){StyledElements.StyledElement.call(this,[]),this.wrapperElement=document.createElement("hr")};t.inherit(e,StyledElements.StyledElement),StyledElements.Separator=e}(StyledElements.Utils),function(t){"use strict";var e=function(e,n){if(0===arguments.length)return!0;n=t.merge({position:["right-bottom","left-bottom"]},n),StyledElements.PopupMenuBase.call(this,n),this.wrapperElement.classList.add("se-popup-submenu"),this.menuItem=new StyledElements.MenuItem(e,function(){this.submenu.show(this.getBoundingClientRect())}),this.menuItem.addClassName("submenu"),this.menuItem.submenu=this};t.inherit(e,StyledElements.PopupMenuBase),e.prototype._getContext=function(){return this.parentMenu instanceof e?this.parentMenu._getContext():this.parentMenu._context},e.prototype._menuItemCallback=function(t){for(var e=this;e.parentMenu;)e=e.parentMenu;e.hide(),t.run(e._context)},e.prototype._setParentPopupMenu=function(t){this.parentMenu=t,this.parentMenu.addEventListener("itemOver",function(t,e){e===this.menuItem?this.show(this.menuItem.getBoundingClientRect()):this.hide()}.bind(this))},e.prototype._getMenuItem=function(){return this.menuItem},e.prototype.addEventListener=function(t,e){switch(t){case"mouseenter":case"mouseleave":case"click":case"blur":case"focus":return this.menuItem.addEventListener(t,e);default:return StyledElements.PopupMenuBase.prototype.addEventListener.call(this,t,e)}},e.prototype.enable=function(){this.menuItem.enable()},e.prototype.disable=function(){this.menuItem.disable()},e.prototype.setDisabled=function(t){this.menuItem.setDisabled(t)},e.prototype.destroy=function(){this.menuItem&&this.menuItem.destroy(),this.menuItem=null,StyledElements.PopupMenuBase.prototype.destroy.call(this)},StyledElements.SubMenuItem=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){e=t.merge({menuOptions:null,menu:null},e),StyledElements.Button.call(this,e),null!=e.menu?(this.popup_menu=e.menu,this._owned_popup_menu=!1):(this.popup_menu=new this.PopupMenu(e.menuOptions),this._owned_popup_menu=!0),this.addEventListener("click",function(){this.popup_menu.isVisible()?this.popup_menu.hide():this.popup_menu.show(this.getBoundingClientRect())}.bind(this)),this._visibilityChangeListener=function(){this.popup_menu.isVisible()?this.wrapperElement.classList.add("open"):this.wrapperElement.classList.remove("open")}.bind(this),this.popup_menu.addEventListener("visibilityChange",this._visibilityChangeListener)};t.inherit(e,StyledElements.Button),e.prototype.PopupMenu=StyledElements.PopupMenu,e.prototype._onkeydown=function(t,e){switch(e){case"ArrowDown":t.preventDefault(),this.popup_menu.show(this.getBoundingClientRect()).moveFocusDown();break;case"ArrowUp":t.preventDefault(),this.popup_menu.show(this.getBoundingClientRect()).moveFocusUp();break;case" ":case"Enter":this._clickCallback(t);break;case"Tab":this.popup_menu.hasEnabledItem()&&(t.preventDefault(),this.popup_menu.moveFocusDown())}},e.prototype.getPopupMenu=function(){return this.popup_menu},e.prototype.replacePopupMenu=function(t){this._owned_popup_menu&&(this.popup_menu.destroy(),this._owned_popup_menu=!1),this.popup_menu=t},e.prototype.destroy=function(){StyledElements.Button.prototype.destroy.call(this),this._owned_popup_menu?this.popup_menu.destroy():this.popup_menu.removeEventListener("visibilityChange",this._visibilityChangeListener),this.popup_menu=null},StyledElements.PopupButton=e}(StyledElements.Utils),function(t){"use strict";var e=function(t,e){var n,i;for(n="string"==typeof e?[e]:e.slice(0),i=t;null!=i&&n.length>0;)i=i[n.splice(0,1)[0]];if(!(n.length>0))return i},n=function(t,n){return Object.getOwnPropertyNames(t).some(function(i,s,l){var r=e(t,i);switch(typeof r){case"number":return n.test(""+r);case"string":return n.test(r);default:return!1}})},i=function(e){return new RegExp(t.escapeRegExp(e),"i")},s=function(t){var e,s,l,r=u.get(this);if(t){var o=i(t);for(e=[],s=0;s<r.elements.length;s+=1)l=r.elements[s],n.call(this,l,o)&&e.push(l);r.filteredElements=e}else r.filteredElements=r.elements.slice(0)},l=function(t){var n,i,s,l,r,o=u.get(this);if(null!=t){if(i=!1,"-"===(n=t[0])[0]&&(i=!0,n=n.substr(1)),"field"in(s=o.sort_info[n]||{})||(s.field=n),null==(l=s.sortFunc))switch(s.type){case"date":r="function"==typeof s.dateparser?s.dateparser:function(t){return new Date(t)},l=function(t,n){t=e(t,this.field);try{if(t=r(t),isNaN(t.getTime()))throw new Error}catch(e){t=new Date(0)}n=e(n,this.field);try{if(n=r(n),isNaN(n.getTime()))throw new Error}catch(t){n=new Date(0)}return t-n}.bind({field:s.field});break;case"number":l=function(t,n){return(t=null!==(t=e(t,this.field))?Number(t):0)-(n=null!==(n=e(n,this.field))?Number(n):0)}.bind({field:s.field});break;default:case"text":l=function(t,n){return t=null!=(t=e(t,this.field))?t.toString():"",n=null!=(n=e(n,this.field))?n.toString():"",t.localeCompare(n)}.bind({field:s.field})}i&&(l=function(t,e){return-this(t,e)}.bind(l)),o.sortedElements=o.filteredElements.slice(0).sort(l)}else o.sortedElements=o.filteredElements},r=function(){return u.get(this).elements.length},o=function(t){"object"!=typeof t&&(t={}),t.requestFunc=function(t,e,n,i){var r,o=t,a=u.get(this);if(t>a.totalPages&&(t=a.totalPages),t-=1,s.call(this,this.options.keywords),l.call(this,this.options.order),e.pageSize>0){var h=t*e.pageSize,c=h+e.pageSize;r=a.sortedElements.slice(h,c)}else r=a.sortedElements;n(r,{current_page:o,total_count:a.sortedElements.length})}.bind(this),StyledElements.PaginatedSource.call(this,t);var e={};u.set(this,e),e.sort_info=t.sort_info,"object"!=typeof e.sort_info&&(e.sort_info={}),Object.defineProperties(this,{length:{get:r}}),this.changeElements(t.initialElements)};t.inherit(o,StyledElements.PaginatedSource),o.prototype.changeOptions=function(t){var e=!1;return"keywords"in t&&(s.call(this,t.keywords),e=!0),"order"in t?l.call(this,t.order):e&&l.call(this,this.options.order),StyledElements.PaginatedSource.prototype.changeOptions.call(this,t)},o.prototype.getElements=function(){return u.get(this).elements.slice(0)};var a=function(t,n,i){if(!i)return-2;var s=-1;return t.every(function(t,l){return e(t,i)!==e(n,i)||(s=l,!1)}),s};o.prototype.changeElements=function(t){var n=u.get(this);if(Array.isArray(t)){if(this.options.idAttr)if(!t.every(function(n,i){if(null==e(n,this.options.idAttr))throw new Error("All elements must have a valid ID");return a(t.slice(0,i),n,this.options.idAttr)<=-1}.bind(this)))throw new Error("All elements must have an unique ID");n.elements=t}else n.elements=[];return s.call(this,this.options.keywords),l.call(this,this.options.order),this.refresh(),this},o.prototype.addElement=function(t){var s=u.get(this);if(this.options.idAttr&&null==e(t,this.options.idAttr))throw new Error("The element must have a valid ID");var r=a(s.elements,t,this.options.idAttr);if(r>=0&&s.elements.splice(r,1),s.elements.push(t),(r=a(s.filteredElements,t,this.options.idAttr))>=0&&s.filteredElements.splice(r,1),this.options.keywords){var o=i(this.options.keywords);n.call(this,t,o)&&s.filteredElements.push(t)}else s.filteredElements.push(t);return l.call(this,this.options.order),this.refresh(),this},o.prototype.removeElement=function(t){var n=u.get(this);if(!this.options.idAttr)throw new Error("options.idAttr is not set");if(null==e(t,this.options.idAttr))throw new Error("The element must have a valid ID");var i=a(n.elements,t,this.options.idAttr);if(i>=0)return n.elements.splice(i,1),s.call(this,this.options.keywords),l.call(this,this.options.order),this;throw new Error("Element does not exist")};var u=new WeakMap;StyledElements.StaticPaginatedSource=o}(StyledElements.Utils),function(t){"use strict";var e,n,i,s,l;i=function(t){if(t.target!==this.inputElement)return this.inputElement.click(),t.stopPropagation(),t.preventDefault(),!1},n=function(){var t,e;e=null!=(t=this.getValue())?t.name:"",this.name_preview.textContent=e,this.name_preview.setAttribute("title",e),this.dispatchEvent("change")},s=function(){this.wrapperElement.classList.add("focus"),this.dispatchEvent("focus")},l=function(){this.wrapperElement.classList.remove("focus"),this.dispatchEvent("blur")},e=function(e){e=t.merge({class:""},e),StyledElements.InputElement.call(this,e.initialValue,["change","focus","blur"]),this.layout=new StyledElements.HorizontalLayout({class:"se-file-field input input-append"}),this.wrapperElement=this.layout.wrapperElement,""!==e.class&&(this.wrapperElement.className+=" "+e.class);var r=document.createElement("div");r.className="input_wrapper",this.wrapperElement.appendChild(r),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex",0),r.appendChild(this.inputElement),e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.name_preview=document.createElement("div"),this.name_preview.className="filename",this.layout.getCenterContainer().appendChild(this.name_preview);var o=document.createElement("div");o.className="se-btn";var a=document.createElement("span");a.textContent=t.gettext("Select"),o.appendChild(a),this.layout.getEastContainer().appendChild(o),this._onchange=n.bind(this),this._onclick=i.bind(this),this._onfocus=s.bind(this),this._onblur=l.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._onclick,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0)},t.inherit(e,StyledElements.InputElement),e.prototype.repaint=function(){this.layout.repaint()},e.prototype.insertInto=function(t,e){StyledElements.InputElement.prototype.insertInto.call(this,t,e),this.repaint()},e.prototype.getValue=function(){return this.inputElement.files[0]},e.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._onclick,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.FileField=e}(StyledElements.Utils),function(t){"use strict";var e=function(t){var e=Number(this.inputElement.value);isNaN(e)?e=t>0&&this.options.min!==Number.NEGATIVE_INFINITY?this.options.min:t<0&&this.options.max!==Number.POSITIVE_INFINITY?this.options.max:0:(e=Math.round(100*(e+t))/100)>this.options.max?e=this.options.max:e<this.options.min&&(e=this.options.min),this.inputElement.value=e},n=function(n){var i={initialValue:0,class:"",min:Number.NEGATIVE_INFINITY,max:Number.POSITIVE_INFINITY,inc:1};this.options=n=t.merge(i,n),n.min=Number(n.min),n.max=Number(n.max),n.inc=Number(n.inc),n.initialValue=Number(n.initialValue),StyledElements.InputElement.call(this,n.initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-numeric-field",this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),null!=n.name&&this.inputElement.setAttribute("name",n.name),null!=n.id&&this.wrapperElement.setAttribute("id",n.id),this.inputElement.setAttribute("value",n.initialValue);var s=new StyledElements.Button({class:"se-numeric-field-top-button",iconClass:"fa fa-caret-up"}),l=new StyledElements.Button({class:"se-numeric-field-bottom-button",iconClass:"fa fa-caret-down"});s.addEventListener("click",e.bind(this,n.inc)),l.addEventListener("click",e.bind(this,-n.inc)),this.inputElement.addEventListener("focus",function(){this.wrapperElement.classList.add("focus"),this.dispatchEvent("focus")}.bind(this),!0),this.inputElement.addEventListener("blur",function(){this.wrapperElement.classList.remove("focus"),this.dispatchEvent("blur")}.bind(this),!0),this.inputElement.addEventListener("keydown",t.stopInputKeydownPropagationListener,!1),this.wrapperElement.appendChild(this.inputElement),s.insertInto(this.wrapperElement),l.insertInto(this.wrapperElement)};t.inherit(n,StyledElements.InputElement),n.prototype.getValue=function(){return Number(this.inputElement.value)},StyledElements.NumericField=n}(StyledElements.Utils),function(t,e){"use strict";var n,i,s,l,r;i=function(){this.dispatchEvent("change")},s=function(){this.dispatchEvent("focus")},l=function(){this.dispatchEvent("blur")},r=function(t){"Enter"===e.normalizeKey(t)&&this.dispatchEvent("submit")},n=function(t){t=e.merge({initialValue:"",class:"",placeholder:null},t),StyledElements.InputElement.call(this,t.initialValue,["change","focus","blur","submit","keydown"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-field",""!==t.class&&(this.wrapperElement.className+=" "+t.class),t.name&&this.inputElement.setAttribute("name",t.name),null!=t.placeholder&&this.setPlaceholder(t.placeholder),null!=t.id&&this.wrapperElement.setAttribute("id",t.id),this.inputElement.setAttribute("value",t.initialValue),this._oninput=i.bind(this),this._onfocus=s.bind(this),this._onblur=l.bind(this),this._onkeypress=r.bind(this),this.inputElement.addEventListener("mousedown",e.stopPropagationListener,!0),this.inputElement.addEventListener("click",e.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keypress",this._onkeypress,!0),this._onkeydown_bound=a.bind(this),this.inputElement.addEventListener("keydown",this._onkeydown_bound,!1)},e.inherit(n,StyledElements.InputElement),n.prototype.setPlaceholder=function(t){this.inputElement.setAttribute("placeholder",t)},n.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",e.stopPropagationListener,!0),this.inputElement.removeEventListener("click",e.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keypress",this._onkeypress,!0),this.inputElement.removeEventListener("keydown",this._onkeydown_bound,!1),delete this._oninput,delete this._onfocus,delete this._onblur,delete this._onkeypress,delete this._onkeydown_bound,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.TextField=n;var o=["Escape","Enter"],a=function(t){var n,i;n=e.extractModifiers(t),i=e.normalizeKey(t),(n.altKey||n.metaKey||n.ctrlKey||-1!==o.indexOf(i))&&"Backspace"!==i||t.stopPropagation(),this.enabled&&(n.preventDefault=t.preventDefault.bind(t),n.stopPropagation=t.stopPropagation.bind(t),n.key=i,this.dispatchEvent("keydown",n,i))}}(StyledElements,StyledElements.Utils),function(t){"use strict";var e,n,i,s;n=function(){this.dispatchEvent("change")},i=function(){this.dispatchEvent("focus")},s=function(){this.dispatchEvent("blur")},e=function(e){e=t.merge({initialValue:"",class:""},e),StyledElements.InputElement.call(this,e.initialValue,["blur","change","focus"]),this.inputElement=document.createElement("textarea"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-area",""!==e.class&&(this.wrapperElement.className+=" "+e.class),e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.setValue(e.initialValue),this._oninput=n.bind(this),this._onfocus=i.bind(this),this._onblur=s.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keydown",t.stopInputKeydownPropagationListener,!1)},t.inherit(e,StyledElements.InputElement),e.prototype.select=function(){this.inputElement.select()},e.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keydown",t.stopInputKeydownPropagationListener,!1),delete this._oninput,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.TextArea=e}(StyledElements.Utils),function(t){"use strict";var e=function(){this.listComponent.enabled&&this.listComponent.toggleElementSelection(this.value)},n=function(){for(var t=0;t<this.currentSelection.length;t++){var e=this.currentSelection[t];this.entriesByValue[e].element.classList.remove("selected")}this.currentSelection=[]},i=function(e){e=t.merge({class:"",id:null,multivalued:!1,initialEntries:[],initialSelection:[]},e),StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"styled_list"),null!=e.id&&(this.wrapperElement.id=e.id),this.content=document.createElement("div"),this.wrapperElement.appendChild(this.content),this.entries=[],this.entriesByValue={},this.currentSelection=[],this.addEntries(e.initialEntries),this.select(e.initialSelection),e.full&&this.wrapperElement.classList.add("full"),this.multivalued=e.multivalued,void 0===e.allowEmpty?this.allowEmpty=this.multivalued:this.allowEmpty=e.allowEmpty};t.inherit(i,StyledElements.StyledElement),i.prototype.addEntries=function(t){var n,i;if(null!=t&&0!==t.length){if(!Array.isArray(t))throw new TypeError;for(var s=0;s<t.length;s++){var l=t[s];Array.isArray(l)?(n=l[0],i=l[1]):(n=t[s].value,i=t[s].label),i=i||n;var r=document.createElement("div");r.className="row";var o={listComponent:this,value:n};r.addEventListener("click",e.bind(o),!0),l.element=r,r.appendChild(document.createTextNode(i)),this.content.appendChild(r),this.entriesByValue[n]=l}this.entries=this.entries.concat(t)}},i.prototype.removeEntryByValue=function(t){var e;e=this.entriesByValue[t],delete this.entriesByValue[t],this.entries.slice(this.entries.indexOf(e),1),e.element.remove(),this.currentSelection.splice(void 0,1),this.dispatchEvent("change",this.currentSelection,[],[t])},i.prototype.clear=function(){this.cleanSelection(),this.content.innerHTML="",this.entries=[],this.entriesByValue={}},i.prototype.getSelection=function(){return t.clone(this.currentSelection)},i.prototype.cleanSelection=function(){if(0!==this.currentSelection.length){var t=this.currentSelection;n.call(this),this.dispatchEvent("change",[],[],t)}},i.prototype.select=function(t){n.call(this),this.addSelection(t)},i.prototype.addSelection=function(t){var e,i,s=[],l=[];if(0!==t.length){if(!this.multivalued){if(t[0]===this.currentSelection[0])return;l=this.currentSelection,n.call(this),t.length>1&&(t=t.splice(0,1))}for(e=0;e<t.length;e++)i=t[e],-1===this.currentSelection.indexOf(i)&&(this.entriesByValue[i].element.classList.add("selected"),this.currentSelection.push(i),s.push(i));this.dispatchEvent("change",this.currentSelection,s,l)}},i.prototype.removeSelection=function(t){var e,n,i,s=[];if(0!==t.length){for(e=0;e<t.length;e++)n=t[e],this.entriesByValue[n].element.classList.remove("selected"),-1!==(i=this.currentSelection.indexOf(n))&&(this.currentSelection.splice(i,1),this.entriesByValue[n].element.classList.remove("selected"),s.push(n));s.length>0&&this.dispatchEvent("change",this.currentSelection,[],s)}},i.prototype.toggleElementSelection=function(t){this.entriesByValue[t].element.classList.contains("selected")?this.allowEmpty&&this.removeSelection([t]):this.addSelection([t])},StyledElements.List=i}(StyledElements.Utils),function(t){"use strict";var e,n,i,s;n=function(){this.dispatchEvent("change")},i=function(){this.dispatchEvent("focus")},s=function(){this.dispatchEvent("blur")},e=function(e){e=t.merge({initialValue:"",class:""},e),StyledElements.InputElement.call(this,e.initialValue,["change","focus","blur"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","password"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-password-field",""!==e.class&&(this.wrapperElement.className+=" "+e.class),"name"in e&&this.inputElement.setAttribute("name",e.name),"id"in e&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue),this._oninput=n.bind(this),this._onfocus=i.bind(this),this._onblur=s.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keydown",t.stopInputKeydownPropagationListener,!1)},t.inherit(e,StyledElements.InputElement),e.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keydown",t.stopInputKeydownPropagationListener,!1),StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.PasswordField=e}(StyledElements.Utils),function(t){"use strict";var e,n,i,s;n=function(t){if(this.enabled){var e=t.target;this.textDiv.textContent=e[e.selectedIndex].text,this.dispatchEvent("change")}},i=function(){this.addClassName("focus").dispatchEvent("focus")},s=function(){this.removeClassName("focus").dispatchEvent("blur")},e=function(e){e=t.merge({class:"",initialEntries:[],initialValue:null,idFunc:function(t){return null==t?"":t.toString()}},e),StyledElements.InputElement.call(this,e.initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-select",this.addClassName(e.class);var l=document.createElement("div");l.className="se-select-arrow",this.inputElement=document.createElement("select"),e.name&&this.inputElement.setAttribute("name",e.name),e.id&&this.wrapperElement.setAttribute("id",e.id),this.textDiv=document.createElement("div"),this.textDiv.className="se-select-text",this.wrapperElement.appendChild(this.textDiv),this.wrapperElement.appendChild(l),this.wrapperElement.appendChild(this.inputElement),this.optionsByValue={},this.optionValues={},this.idFunc=e.idFunc,this.addEntries(e.initialEntries),this._onchange=n.bind(this),this._onfocus=i.bind(this),this._onblur=s.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0);var r=this.inputElement.options.selectedIndex;-1!==r&&(this.textDiv.textContent=this.inputElement.options[r].text)},t.inherit(e,StyledElements.InputElement),e.prototype.getLabel=function(){return this.textDiv.textContent},e.prototype.getValue=function(){return this.optionValues[this.inputElement.value]},e.prototype.setValue=function(t){if("string"!=typeof t)try{t=this.idFunc(t)}catch(e){t=null}if(null===t||!(t in this.optionValues))if(null!=this.defaultValue)t=this.defaultValue;else{if(!(this.inputElement.options.length>0))return StyledElements.InputElement.prototype.setValue.call(this,""),void(this.textDiv.textContent="");t=this.inputElement.options[0].value}StyledElements.InputElement.prototype.setValue.call(this,t),this.textDiv.textContent=this.optionsByValue[t]},e.prototype.addEntries=function(t){var e,n,i,s,l;if(e=this.inputElement.options.selectedIndex,l=void 0!==this.defaultValue?this.idFunc(this.defaultValue):null,null!=t&&0!==t.length){for(var r=0;r<t.length;r++){s=t[r];var o=document.createElement("option");Array.isArray(s)?(n=s[0],i=s[1]):null!=s.value?(n=s.value,i=s.label):(n=s,i=s),i=i||n;var a=n;"string"!=typeof n&&(n=this.idFunc(n)),o.setAttribute("value",n),o.appendChild(document.createTextNode(i)),l===n&&o.setAttribute("selected","selected"),this.inputElement.appendChild(o),this.optionValues[n]=a,this.optionsByValue[n]=i}var u=this.inputElement.options.selectedIndex;e!==u&&(this.textDiv.textContent=this.inputElement.options[u].text)}},e.prototype.clear=function(){this.textDiv.textContent="",this.inputElement.textContent="",this.optionsByValue={},this.optionValues={}},e.prototype.destroy=function(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,StyledElements.InputElement.prototype.destroy.call(this)},StyledElements.Select=e}(StyledElements.Utils),function(t){"use strict";StyledElements.ToggleButton=function(e){e=t.merge({initiallyChecked:!1},e),StyledElements.Button.call(this,e),Object.defineProperty(this,"active",{get:function(){return this.hasClassName("active")},set:function(t){this.toggleClassName("active",t)}}),this.active=e.initiallyChecked},t.inherit(StyledElements.ToggleButton,StyledElements.Button),StyledElements.ToggleButton.prototype._clickCallback=function(t){t.stopPropagation(),this.click()},StyledElements.ToggleButton.prototype.click=function(){return this.enabled&&(this.active=!this.active,this.dispatchEvent("click")),this}}(StyledElements.Utils),function(t){"use strict";var e=function(e){e=t.merge({class:""},e),StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("ul"),this.wrapperElement.className=t.appendWord(e.class,"se-pills"),this.activePill=null,this.pills={}};t.inherit(e,StyledElements.Container),e.prototype.add=function(t,e){var n=document.createElement("li");n.className="se-pill",n.textContent=e,n.addEventListener("click",function(t,e){e.preventDefault(),e.stopPropagation(),this.switchPill(t)}.bind(this,t),!0),this.wrapperElement.appendChild(n),this.pills[t]=n},e.prototype.switchPill=function(t){if(!(t in this.pills))throw new TypeError("Invalid pill id");t!==this.activePill&&(null!=this.activePill&&this.pills[this.activePill].classList.remove("active"),this.activePill=t,this.pills[this.activePill].classList.add("active"),this.dispatchEvent("change",t))},StyledElements.Pills=e}(StyledElements.Utils),function(t,e){"use strict";var n=function n(r,o,a){if(!(o instanceof t.Notebook))throw new TypeError("Invalid notebook argument");(a=e.merge({closable:!0,containerOptions:{},label:""},a)).useFullHeight=!0,Object.defineProperties(this,{label:{get:s},notebook:{value:o},tabElement:{get:l},tabId:{value:r}});var u={labelElement:document.createElement("span"),tabElement:document.createElement("li")};if(i.set(this,u),u.tabElement.className="se-notebook-tab",u.tabElement.appendChild(u.labelElement),t.Container.call(this,a.containerOptions,["show","hide","close"]),this.wrapperElement.classList.add("se-notebook-tab-content"),this.wrapperElement.classList.add("hidden"),u.tabElement.addEventListener("click",function(){this.notebook.goToTab(this.tabId)}.bind(this),!1),a.closable){var h=new this.Button({iconClass:"fa fa-remove",plain:!0,class:"close_button"});h.insertInto(u.tabElement),h.addEventListener("click",this.close.bind(this),!1)}null!=a.name&&(a.label=a.name),n.prototype.setLabel.call(this,a.label),this.setTitle(a.title)};e.inherit(n,t.Container),n.prototype.Tooltip=t.Tooltip,n.prototype.Button=t.Button,n.prototype.close=function(){return this.notebook.removeTab(this.tabId),this.dispatchEvent("close")},n.prototype.setLabel=function(t){return i.get(this).labelElement.textContent=t,this},n.prototype.setTitle=function(t){return null==t||""===t?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:t,placement:["bottom","top","right","left"]}),this.tooltip.bind(i.get(this).tabElement)),this.tooltip.options.content=t),this},n.prototype.setVisible=function(t){return t?this.show():this.hide()},n.prototype.hide=function(){return t.Container.prototype.hide.call(this),i.get(this).tabElement.classList.remove("selected"),this},n.prototype.show=function(){return t.Container.prototype.show.call(this),i.get(this).tabElement.classList.add("selected"),this.repaint(!1),this},n.prototype.getId=function(){return this.tabId},n.prototype.getTabElement=function(){return i.get(this).tabElement},n.prototype.rename=n.prototype.setLabel;var i=new WeakMap,s=function(){return i.get(this).tabElement.textContent},l=function(){return i.get(this).tabElement};t.Tab=n}(StyledElements,StyledElements.Utils),function(t){"use strict";var e=function(e){var r;StyledElements.StyledElement.call(this,["change","changed","tabDeletion","tabInsertion","newTab"]);e=t.merge({class:"",focusOnSetVisible:!0,full:!0},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"se-notebook"),r=new StyledElements.HorizontalLayout({class:"se-notebook-tabs-wrapper",autoHeight:!1}),this.tabWrapper=r,r.insertInto(this.wrapperElement),this.tabArea=new StyledElements.Container,r.center.appendChild(this.tabArea.addClassName("se-notebook-tab-area")),this.moveLeftButton=new this.Button({class:"move_left",iconClass:"fa fa-caret-left"}),r.west.appendChild(this.moveLeftButton),this.moveRightButton=new this.Button({class:"move_right",iconClass:"fa fa-caret-right"}),r.east.appendChild(this.moveRightButton),this.contentArea=document.createElement("div"),this.contentArea.className="se-notebook-content-wrapper",this.wrapperElement.appendChild(this.contentArea),this.tabs=[],this.tabsById=[],this.visibleTab=null,null!=e.id&&this.wrapperElement.setAttribute("id",e.id),e.full&&this.wrapperElement.classList.add("full"),this.focusOnSetVisible=e.focusOnSetVisible,this.events.newTab.addEventListener=function(e){var n;null==this.new_tab_button_tabs&&(n=function(){this.dispatchEvent("newTab")}.bind(this),this.new_tab_button_tabs=new this.Button({iconClass:"fa fa-plus",class:"se-notebook-new-tab",title:t.gettext("Add Tab")}),this.new_tab_button_tabs.addEventListener("click",n),this.tabArea.appendChild(this.new_tab_button_tabs),this.new_tab_button_left=new this.Button({iconClass:"fa fa-plus",class:"se-notebook-new-tab",title:t.gettext("Add Tab")}),this.new_tab_button_left.addEventListener("click",n),this.addButton(this.new_tab_button_left)),StyledElements.Event.prototype.addEventListener.call(this.events.newTab,e)}.bind(this);var o={control:this,initialScrollLeft:null,finalScrollLeft:null,steps:null,step:null,inc:null};this.transitionsQueue=new StyledElements.CommandQueue(o,function(t,e){var r,o,a,u,h,c;switch(t.initialScrollLeft=t.control.tabArea.wrapperElement.scrollLeft,c=document.defaultView.getComputedStyle(t.control.tabArea.wrapperElement,null).getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX),e.type){case"shiftLeft":if(0===t.control.tabs.length||n.call(t.control,0))return!1;r=l.call(t.control),o=t.control.tabs[r-1].getTabElement(),t.finalScrollLeft=o.offsetLeft-c;break;case"shiftRight":if(i.call(t.control))return!1;r=l.call(t.control),o=t.control.tabs[r+1].getTabElement(),t.finalScrollLeft=o.offsetLeft-c;break;case"focus":if(null==t.control.tabsById[e.tabId])return!1;if(o=t.control.tabsById[e.tabId].getTabElement(),n.call(t.control,t.control.getTabIndex(e.tabId),!0))return!1;t.finalScrollLeft=o.offsetLeft-c}a=t.control.tabArea.wrapperElement.scrollWidth-t.control.tabArea.wrapperElement.clientWidth,t.finalScrollLeft>a&&(t.finalScrollLeft=a),u=(new Date).getTime()+100,h=[],t.steps=6;for(var p=0;p<=t.steps;p++)h[p]=u+100*p;return t.step=0,t.inc=Math.floor((t.finalScrollLeft-t.initialScrollLeft)/t.steps),new Promise((e,n)=>{!function n(){if(function(t,e){var n=e.initialScrollLeft+Math.floor((t+1)*e.inc);return e.inc<0&&n>e.finalScrollLeft||e.inc>0&&n<e.finalScrollLeft?(e.control.tabArea.wrapperElement.scrollLeft=Math.round(n),!0):(e.control.tabArea.wrapperElement.scrollLeft=e.finalScrollLeft,s.call(e.control),!1)}(t.step,t)){var i=h[t.step]-(new Date).getTime();i<0&&(i=0),t.step++,setTimeout(n,i)}else e()}()})}),this.moveLeftButton.addEventListener("click",this.shiftLeftTabs.bind(this)),this.moveRightButton.addEventListener("click",this.shiftRightTabs.bind(this)),Object.defineProperty(this,"fullscreen",{get:function(){return t.getFullscreenElement()===this.wrapperElement}})};t.inherit(e,StyledElements.StyledElement),e.prototype.Button=StyledElements.Button,e.prototype.Tab=StyledElements.Tab;var n=function(t,e){var n,i,s,l;return n=this.tabs[t].getTabElement(),s=(i=this.tabArea.wrapperElement.scrollLeft)+this.tabArea.wrapperElement.clientWidth,e?(l=n.offsetLeft+n.offsetWidth,n.offsetLeft>=i&&l<=s):n.offsetLeft>=i&&n.offsetLeft<=s},i=function(){var t=this.tabs.length-1;return!(0!==this.tabs.length&&!n.call(this,t,!0))||!!n.call(this,t)&&(this.tabs.length<2||!n.call(this,t-1))},s=function(){if(0===this.tabs.length)return this.moveLeftButton.disable(),this.moveRightButton.disable(),void(null!=this.new_tab_button_tabs&&(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()));var t=n.call(this,0),e=i.call(this);this.moveLeftButton.setDisabled(t),this.moveRightButton.setDisabled(e),null!=this.new_tab_button_tabs&&(t&&e?(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()):(this.new_tab_button_tabs.disable(),this.new_tab_button_left.enable()),this.tabWrapper.repaint())},l=function(){var t;for(t=0;t<this.tabs.length;t+=1)if(n.call(this,t))return t;return null};e.prototype.shiftLeftTabs=function(){return this.transitionsQueue.addCommand({type:"shiftLeft"})},e.prototype.shiftRightTabs=function(){return this.transitionsQueue.addCommand({type:"shiftRight"})},e.prototype.createTab=function(e){var n={initiallyVisible:!1,tab_constructor:this.Tab};e=t.merge(n,e);var i=this.tabsById.push(null);if(e.tab_constructor!==this.Tab&&!(e.tab_constructor.prototype instanceof StyledElements.Tab))throw new TypeError;var l=new e.tab_constructor(i,this,e);this.tabs[this.tabs.length]=l,this.tabsById[i]=l;var r=l.getTabElement();return null!=this.new_tab_button_tabs?this.tabArea.prependChild(r,this.new_tab_button_tabs):this.tabArea.appendChild(r),l.insertInto(this.contentArea),this.visibleTab||(this.visibleTab=l,l.setVisible(!0)),s.call(this),e.initiallyVisible&&this.goToTab(i),this.dispatchEvent("tabInsertion",l),l},e.prototype.getTab=function(t){return this.tabsById[t]},e.prototype.getTabByLabel=function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].label===t)return this.tabs[e];return null},e.prototype.getVisibleTab=function(){return this.visibleTab},e.prototype.getTabByIndex=function(t){return this.tabs[t]},e.prototype.getTabIndex=function(t){for(var e=0;e<this.tabs.length;e++)if(this.tabs[e].tabId===t)return e;return null},e.prototype.removeTab=function(t){var e,n,i;if(t instanceof StyledElements.Tab){if(this.tabsById[t.tabId]!==t)throw new TypeError("tab is not owned by this notebook");t=t.getId()}return this.tabsById[t]?(delete this.tabsById[t],e=this.getTabIndex(t),n=this.tabs.splice(e,1)[0],this.tabArea.removeChild(n.getTabElement()),this.contentArea.removeChild(n.wrapperElement),s.call(this),this.visibleTab===n&&this.tabs.length>0?((i=this.tabs[e])||(i=this.tabs[e-1]),this.goToTab(i.tabId)):this.visibleTab===n&&(this.visibleTab=null),n.dispatchEvent("close",this),this.dispatchEvent("tabDeletion",n),this):this},e.prototype.goToTab=function(t,e){var n,i;if(t instanceof StyledElements.Tab){if(this.tabsById[t.tabId]!==t)throw new TypeError("tab is not owned by this notebook");n=t}else if(null==(n=this.tabsById[t]))throw new TypeError("Invalid tab id");i=this.visibleTab,null==e&&(e={}),this.visibleTab&&n===this.visibleTab?this.focusOnSetVisible&&this.focus(n.tabId):(this.dispatchEvent("change",i,n,e.context),this.visibleTab&&this.visibleTab.setVisible(!1),this.visibleTab=n,this.visibleTab.setVisible(!0),this.focusOnSetVisible&&this.focus(n.tabId),this.dispatchEvent("changed",i,n,e.context))},e.prototype.getNumberOfTabs=function(){return this.tabs.length},e.prototype.focus=function(t){if(t instanceof StyledElements.Tab){if(this.tabsById[t.tabId]!==t)throw new TypeError("tab is not owned by this notebook")}else if(null==(t=this.tabsById[t]))throw new TypeError("Invalid tab id");return this.transitionsQueue.addCommand({type:"focus",tabId:t.tabId})},e.prototype.repaint=function(t){var e;if(t=null!=t&&t,this.tabWrapper.repaint(),s.call(this),t)this.visibleTab&&this.visibleTab.repaint(!0);else for(e=0;e<this.tabs.length;e++)this.tabs[e].repaint(!1);return this},e.prototype._onenabled=function(t){t?(this.disabledLayer.remove(),this.disabledLayer=null):(this.disabledLayer=document.createElement("div"),this.disabledLayer.classList.add("se-container-disable-layer"),this.wrapperElement.appendChild(this.disabledLayer))},e.prototype.clear=function(){return this.tabs=[],this.tabsById=[],this.visibleTab=null,this.tabArea.clear(),this.contentArea.innerHTML="",s.call(this),this},e.prototype.addButton=function(t,e){if(!(t instanceof StyledElements.Button||t instanceof StyledElements.Select))throw new TypeError;switch(e=e||"right"){case"left":this.tabWrapper.west.prependChild(t,this.moveLeftButton);break;case"right":this.tabWrapper.east.appendChild(t)}return s.call(this),this},e.prototype.requestFullscreen=function(){return"requestFullscreen"in this.wrapperElement?this.wrapperElement.requestFullscreen():"msRequestFullscreen"in this.wrapperElement?this.wrapperElement.msRequestFullscreen():"mozRequestFullScreen"in this.wrapperElement?this.wrapperElement.mozRequestFullScreen():"webkitRequestFullscreen"in this.wrapperElement&&this.wrapperElement.webkitRequestFullscreen(),this},e.prototype.exitFullscreen=function(){return!0!==this.fullscreen?this:("exitFullscreen"in document?document.exitFullscreen():"msExitFullscreen"in document?document.msExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"webkitExitFullscreen"in document&&document.webkitExitFullscreen(),this)},e.prototype.destroy=function(){this.remove(),this.tabs=null,this.tabsById=null,this.visibleTab=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.Notebook=e}(StyledElements.Utils),function(t,e){"use strict";var n=function(e,n){t.Container.call(this,n,["hide","show"]),this.addClassName("hidden"),Object.defineProperties(this,{altId:{value:e}})};e.inherit(n,t.Container),n.prototype._onhidden=function(e){return e||this.repaint(!1),t.Container.prototype._onhidden.call(this,e)},n.prototype.setVisible=function(t){return t?this.show():this.hide()},n.prototype.isVisible=function(){return!this.hidden},n.prototype.getId=function(){return this.altId},t.Alternative=n}(StyledElements,StyledElements.Utils),function(t){"use strict";var e=function(e){var r={class:"",full:!0,defaultEffect:StyledElements.Alternatives.NONE};e=t.merge(r,e),StyledElements.StyledElement.call(this,["preTransition","postTransition"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"se-alternatives"),e.id&&this.wrapperElement.setAttribute("id",e.id),e.full&&this.wrapperElement.classList.add("full"),Object.defineProperties(this,{alternatives:{get:i},alternativeList:{get:s},defaultEffect:{value:e.defaultEffect,writable:!0}});n.set(this,{nextAltId:0,transitionsQueue:new StyledElements.CommandQueue(this,function(e,i){var s,r,o,a=n.get(e);switch(o=Promise.resolve(),i.type){case"transit":if(s=i.inAlternative,r=e.visibleAlt,s===r)return t.callCallback(i.onComplete,e,r,s),!1;o=l(i.effect,r,s,e);break;case"remove":r=i.outAlternative,a.visibleAlt===r&&(a.alternativeList.length>0?((s=a.alternativeList[i.index])||(s=a.alternativeList[i.index-1]),o=l(i.effect,r,s,e)):a.visibleAlt=null),o=o.then(function(){e.wrapperElement.removeChild(r.wrapperElement)}.bind(this))}return o.then(function(){t.callCallback(i.onComplete,e,r,s)})}),visibleAlt:null,alternatives:{},alternativeList:[]})};t.inherit(e,StyledElements.StyledElement),e.HORIZONTAL_FLIP="horizontalflip",e.HORIZONTAL_SLIDE="horizontalslide",e.CROSS_DISSOLVE="dissolve",e.NONE="none",e.prototype.repaint=function(t){var e=n.get(this);return null!=e.visibleAlt&&e.visibleAlt.repaint(!!t),this},e.prototype.createAlternative=function(e){var i=n.get(this),s={alternative_constructor:StyledElements.Alternative,containerOptions:{},initiallyVisible:!1};(e=t.update(s,e)).containerOptions.parentElement=this;var l=n.get(this).nextAltId++;if(e.alternative_constructor!==StyledElements.Alternative&&!(e.alternative_constructor.prototype instanceof StyledElements.Alternative))throw new TypeError;var r=new e.alternative_constructor(l,e.containerOptions);return r.parentElement=this,r.insertInto(this.wrapperElement),i.alternatives[l]=r,i.alternativeList.push(r),i.visibleAlt?e.initiallyVisible&&this.showAlternative(r):(i.visibleAlt=r,r.setVisible(!0)),r},e.prototype.removeAlternative=function(e,i){var s,l,r;if(r=n.get(this),i=t.update({effect:this.defaultEffect,onComplete:null},i),e instanceof StyledElements.Alternative){if(l=e.altId,r.alternatives[l]!==e)throw new TypeError("alternative is not owner by this alternatives element")}else if(l=e,!(e=r.alternatives[e]))return t.callCallback(i.onComplete),Promise.resolve();return delete r.alternatives[l],s=r.alternativeList.indexOf(e),r.alternativeList.splice(s,1),r.transitionsQueue.addCommand({effect:i.effect,index:s,type:"remove",onComplete:i.onComplete,outAlternative:e})},e.prototype.clear=function(){var t=n.get(this);return t.alternatives={},t.alternativeList=[],t.nextAltId=0,t.visibleAlt=null,this.wrapperElement.innerHTML="",this},e.prototype.getCurrentAlternative=function(){return n.get(this).visibleAlt},Object.defineProperties(e.prototype,{visibleAlt:{get:e.prototype.getCurrentAlternative}}),e.prototype.showAlternative=function(e,i){var s,l={};if(i=t.update({effect:this.defaultEffect,onComplete:null},i),s=n.get(this),e instanceof StyledElements.Alternative){if(s.alternatives[e.altId]!==e)throw new TypeError("Invalid alternative");l.inAlternative=e}else{if(null==s.alternatives[e])throw new TypeError("Invalid alternative");l.inAlternative=s.alternatives[e]}return l.type="transit",l.onComplete=i.onComplete,l.effect=i.effect,s.transitionsQueue.addCommand(l)};var n=new WeakMap,i=function(){return t.clone(n.get(this).alternatives)},s=function(){return n.get(this).alternativeList.slice(0)},l=function(e,i,s,l){var r=new Promise(function(t){l.dispatchEvent("preTransition",i,s),l.wrapperElement.classList.add("se-on-transition"),t()});switch(e){case StyledElements.Alternatives.HORIZONTAL_SLIDE:i.addClassName("slide"),s.addClassName(["slide",s.altId<i.altId?"left":"right"]).show(),r=r.then(function(){return Promise.all([t.waitTransition(s.get()),t.waitTransition(i.get())])}).then(function(){s.removeClassName("slide"),i.removeClassName("slide left right").hide()}),setTimeout(function(){i.addClassName(s.altId<i.altId?"right":"left"),s.removeClassName("left right")},10);break;case StyledElements.Alternatives.CROSS_DISSOLVE:s.addClassName("fade").show(),i.addClassName("fade in"),r=r.then(function(){return Promise.all([t.waitTransition(s.get()),t.waitTransition(i.get())])}).then(function(){s.removeClassName("fade in"),i.removeClassName("fade").hide()}),setTimeout(function(){s.addClassName("in"),i.removeClassName("in")},10);break;default:case StyledElements.Alternatives.NONE:r=r.then(function(){s.show(),i.hide()})}return r.then(function(){n.get(l).visibleAlt=s,l.wrapperElement.classList.remove("se-on-transition"),l.dispatchEvent("postTransition",i,s)})};StyledElements.Alternatives=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){StyledElements.StyledElement.call(this,[]),this.options=t.merge({class:""},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord(this.options.class,"se-horizontal-layout"),this.west=new StyledElements.Container({class:"se-hl-west-container"}),this.center=new StyledElements.Container({class:"se-hl-center-container"}),this.east=new StyledElements.Container({class:"se-hl-east-container"}),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement)};t.inherit(e,StyledElements.StyledElement),e.prototype.repaint=function(t){this.west.repaint(t),this.center.repaint(t),this.east.repaint(t)},e.prototype.getWestContainer=function(){return this.west},e.prototype.getCenterContainer=function(){return this.center},e.prototype.getEastContainer=function(){return this.east},StyledElements.HorizontalLayout=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){StyledElements.StyledElement.call(this,[]),this.options=t.merge({class:""},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord(this.options.class,"se-vertical-layout"),this.north=new StyledElements.Container({class:"se-vl-north-container"}),this.center=new StyledElements.Container({class:"se-vl-center-container"}),this.south=new StyledElements.Container({class:"se-vl-south-container"}),this.north.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)};t.inherit(e,StyledElements.StyledElement),e.prototype.repaint=function(t){this.north.repaint(t),this.center.repaint(t),this.south.repaint(t)},StyledElements.VerticalLayout=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){StyledElements.StyledElement.call(this,[]),e=t.merge({class:""},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord(e.class,"se-border-layout"),Object.defineProperties(this,{north:{value:new StyledElements.Container({class:"se-bl-north-container"})},west:{value:new StyledElements.Container({class:"se-bl-west-container"})},center:{value:new StyledElements.Container({class:"se-bl-center-container"})},east:{value:new StyledElements.Container({class:"se-bl-east-container"})},south:{value:new StyledElements.Container({class:"se-bl-south-container"})}}),this.north.insertInto(this.wrapperElement),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)};t.inherit(e,StyledElements.StyledElement),e.prototype.repaint=function(t){var e=this.wrapperElement.offsetWidth,n=this.wrapperElement.offsetHeight,i=this.north.wrapperElement.offsetHeight,s=n-this.south.wrapperElement.offsetHeight,l=s-i;l<0&&(l=0);var r=this.west.wrapperElement.offsetWidth,o=e-this.east.wrapperElement.offsetWidth,a=o-r;a<0&&(a=0),this.west.wrapperElement.style.top=i+"px",this.west.wrapperElement.style.height=l+"px",this.center.wrapperElement.style.top=i+"px",this.center.wrapperElement.style.height=l+"px",this.center.wrapperElement.style.width=a+"px",this.center.wrapperElement.style.left=r+"px",this.east.wrapperElement.style.top=i+"px",this.east.wrapperElement.style.height=l+"px",this.east.wrapperElement.style.left=o+"px",this.south.wrapperElement.style.top=s+"px",this.north.repaint(t),this.west.repaint(t),this.center.repaint(t),this.east.repaint(t),this.south.repaint(t)},e.prototype.getNorthContainer=function(){return this.north},e.prototype.getWestContainer=function(){return this.west},e.prototype.getCenterContainer=function(){return this.center},e.prototype.getEastContainer=function(){return this.east},e.prototype.getSouthContainer=function(){return this.south},StyledElements.BorderLayout=e}(StyledElements.Utils),function(t){"use strict";var e=function(){var t=c.get(this);this.selection.forEach(function(e){e in t.current_elements&&t.current_elements[e].row.classList.add("highlight")},this)},n=function(n,l){var r,o,u,p,d,m;m={initialSortColumn:-1,pageSize:5,emptyMessage:t.gettext("No data available"),selectionType:"none"},r=null!=(l=t.merge(m,l)).class?t.appendWord("se-model-table full",l.class):"se-model-table full";var f={};c.set(this,f),StyledElements.StyledElement.call(this,["click","select"]);var E;f={};if(c.set(this,f),f.selection=[],f.selectionType=l.selectionType,null!=l.source)E=l.source;else if(null!=l.pagination)E=l.pagination;else{for(p={},o=0;o<n.length;o+=1)p[d=d in(u=n[o])?u.sort_id:u.field]=u;E=new StyledElements.StaticPaginatedSource({pageSize:l.pageSize,sort_info:p,idAttr:l.id})}if(f.layout=new StyledElements.VerticalLayout({class:r}),Object.defineProperties(this,{columns:{writable:!0,value:n},emptyMessage:{writable:!0,value:l.emptyMessage},selection:{get:function(){return f.selection},set:function(t){if(!a(f.selectionType))throw new Error("Selection is disabled");if(!Array.isArray(t))throw new TypeError;if("single"===f.selectionType&&t.length>1)throw new Error('Selection is set to "single" but tried to select more than one rows.');f.selection.forEach(function(t){t in f.current_elements&&f.current_elements[t].row.classList.remove("highlight")},this),f.selection=t,e.call(this)}},source:{writable:!1,value:E},statusBar:{get:function(){return f.statusBar}}}),this.wrapperElement=f.layout.wrapperElement,this.wrapperElement.addEventListener("click",function(t){var e=c.get(this);a(e.selectionType)&&(t.shiftKey||t.ctrlKey||(this.select([]),this.events.select.dispatch([])))}.bind(this)),f.header=f.layout.north,f.header.addClassName("se-model-table-headrow"),function(){var e,n,i,l,r=c.get(this);for(r.headerCells=[],e=0;e<this.columns.length;e+=1)l=null!=(n=this.columns[e]).label?n.label:n.field,(i=document.createElement("div")).className="se-model-table-cell","string"==typeof n.class&&i.classList.add(n.class),null!=n.width&&"css"!==n.width?(i.style.width=n.width,i.style.flexGrow=0):"css"===n.width&&(i.style.flexGrow=0),i.textContent=l,!1!==n.sortable&&(i.classList.add("sortable"),new this.Tooltip({content:t.interpolate(t.gettext("Sort by %(column_name)s"),{column_name:l}),placement:["bottom","top","right","left"]}).bind(i),i.callback=s.bind({widget:this,column:e}),i.addEventListener("click",i.callback,!0)),r.header.appendChild(i),r.headerCells.push(i)}.call(this),f.components=[],f.listeners=[],f.tableBody=f.layout.center,f.tableBody.addClassName("se-model-table-body"),f.statusBar=f.layout.south,f.statusBar.addClassName("se-model-table-statusrow"),f.sortColumn=null,Object.defineProperty(this,"pagination",{get:function(){return this.source}}),this.source.addEventListener("requestEnd",function(t,e){if(null==e)this.reload();else{var n=c.get(this);h.call(this);var i=document.createElement("div");i.className="alert alert-danger",i.textContent=e,n.tableBody.appendChild(i)}}.bind(this)),0!==this.source.options.pageSize&&(f.paginationInterface=new StyledElements.PaginationInterface(this.source),f.statusBar.appendChild(f.paginationInterface)),-1===l.initialSortColumn){for(o=0;o<this.columns.length;o+=1)if(!1!==this.columns[o].sortable){l.initialSortColumn=o;break}-1===l.initialSortColumn&&(l.initialSortColumn=null)}else if("string"==typeof l.initialSortColumn){for(o=0;o<this.columns.length;o+=1)if(this.columns[o].field===l.initialSortColumn){l.initialSortColumn=o;break}"string"==typeof l.initialSortColumn&&(l.initialSortColumn=null)}i.call(this,l.initialSortColumn,l.initialDescendingOrder),f.current_elements={},"string"==typeof l.id?f.extractIdFunc=function(t){return t[l.id]}:"function"==typeof l.id&&(f.extractIdFunc=l.id),"function"==typeof l.stateFunc?f.stateFunc=l.stateFunc:f.stateFunc=function(){}};t.inherit(n,StyledElements.StyledElement),n.prototype.Tooltip=StyledElements.Tooltip,n.prototype.select=function(t){return this.selection=null!=t?Array.isArray(t)?t:[t]:[],this};var i=function(t,e){var n,i,s,l,r=c.get(this);null!=r.sortColumn&&((s=r.headerCells[r.sortColumn]).classList.remove("ascending"),s.classList.remove("descending")),r.sortInverseOrder=e,r.sortColumn=t,null!=r.sortColumn?(l=r.headerCells[r.sortColumn],r.sortInverseOrder?(l.classList.remove("ascending"),l.classList.add("descending")):(l.classList.remove("descending"),l.classList.add("ascending")),n=null!=(t=this.columns[r.sortColumn]).sort_id?t.sort_id:t.field,r.sortInverseOrder&&(n="-"+n),i=[n]):i=null,this.source.changeOptions({order:i})},s=function(){var t=c.get(this.widget),e=t.sortColumn===this.column&&!t.sortInverseOrder;i.call(this.widget,this.column,e)},l=function(t,e){var n,i;for(n="string"==typeof e?[e]:e.slice(),i=t;null!=i&&n.length>0;)i=i[n.splice(0,1)[0]];return null==i||n.length>0?"":i},r=function(t,e,n,i){var s,r,o,a,u;s=l(t,e),"function"==typeof i?s=i(s):s instanceof Date||(s=new Date(s)),o=(r=moment(s)).fromNow(),a=r.format("LLLL"),(u=document.createElement("span")).textContent=o,new this.Tooltip({content:a,placement:["bottom","top","right","left"]}).bind(u);var h=setInterval(function(){u.ownerDocument.body.contains(u)||clearInterval(h);var t=r.fromNow();u.textContent!==t&&(u.textContent=t)},1e3);return u},o=function(t){t.stopPropagation(),u.call(this.table,this.item,t,this.index),this.table.events.click.dispatch(this.item,t)},a=function(t){return"single"===t||"multiple"===t},u=function(t,e,n){var i=c.get(this);if(a(i.selectionType)){var s,l,r,o,u,h,p=i.extractIdFunc(t);if("multiple"===i.selectionType&&e.ctrlKey&&e.shiftKey)if(-1===(r=(l=this.source.getCurrentPage()).indexOf(i.lastSelected)))i.lastSelected=t,s=[p];else{(s=i.savedSelection.slice()).splice(s.indexOf(i.extractIdFunc(i.lastSelected)),1);var d=[];for(o=Math.min(n,r),u=Math.max(n,r),h=o;h<=u;h++)d.push(i.extractIdFunc(l[h]));s=s.concat(d),e.target.ownerDocument.defaultView.getSelection().removeAllRanges()}else if("multiple"===i.selectionType&&e.shiftKey)if(-1===(r=(l=this.source.getCurrentPage()).indexOf(i.lastSelected)))i.lastSelected=t,s=[p];else{for(s=[],o=Math.min(n,r),u=Math.max(n,r),h=o;h<=u;h++)s.push(i.extractIdFunc(l[h]));e.target.ownerDocument.defaultView.getSelection().removeAllRanges()}else if("multiple"===i.selectionType&&e.ctrlKey){i.lastSelected=t;var m=(s=this.selection.slice()).indexOf(p);-1!==m?(i.lastSelected=null,s.splice(m,1)):s.push(p),i.savedSelection=s}else s=[p],i.lastSelected=t,i.savedSelection=s;this.select(s),this.events.select.dispatch(s)}},h=function(){var t,e,n=c.get(this);for(t=0;t<n.listeners.length;t+=1)(e=n.listeners[t]).element.removeEventListener("click",e.callback,!1);for(n.components=[],n.listeners=[],n.columnsCells=[],t=0;t<this.columns.length;t+=1)n.columnsCells[t]=[];n.tableBody.clear(),n.current_elements={}};n.prototype.reload=function(){(function(t){var n,i,s,a,u,p,d,m,f,E,y=c.get(this);for(h.call(this),n=0;n<t.length;n+=1){for(s=t[n],p=o.bind({table:this,item:s,index:n}),(a=document.createElement("div")).className="se-model-table-row",n%2==1&&a.classList.add("odd"),null!=(E=y.stateFunc(s))&&a.classList.add("se-model-table-row-"+E),i=0;i<this.columns.length;i+=1)f=this.columns[i],(u=document.createElement("div")).className="se-model-table-cell",y.columnsCells[i].push(u),"string"==typeof f.width&&"css"!==f.width?(u.style.width=f.width,u.style.flexGrow=0):"css"===f.width&&(u.style.flexGrow=0),"string"==typeof f.class&&u.classList.add(f.class),f.contentBuilder?m=f.contentBuilder(s):"date"===f.type?""===l(s,f.field)?m="":(d||(d=new Date),m=r.call(this,s,f.field,d,f.dateparser)):"number"===f.type?""!==(m=l(s,f.field))&&f.unit&&(m=m+" "+f.unit):m=l(s,f.field),null==m&&(m=""),"string"==typeof m?u.textContent=m:"number"==typeof m||"boolean"==typeof m?u.textContent=""+m:m instanceof StyledElements.StyledElement?(m.insertInto(u),y.components.push(m)):u.appendChild(m),u.addEventListener("click",p,!1),y.listeners.push({element:u,callback:p}),a.appendChild(u),"function"==typeof y.extractIdFunc&&(y.current_elements[y.extractIdFunc(s)]={row:a,data:s});y.tableBody.appendChild(a)}0===t.length&&this.source.currentPage&&((a=document.createElement("div")).className="alert alert-info se-model-table-msg",a.textContent=this.emptyMessage,y.tableBody.appendChild(a)),e.call(this)}).call(this,this.source.getCurrentPage())},n.prototype.destroy=function(){var t,e,n=c.get(this);for(t=0;t<n.headerCells.length;t+=1)(e=n.headerCells[t]).callback&&(e.removeEventListener("click",e.callback,!0),e.callback=null);return h.call(this),n.layout.destroy(),n.layout=null,n.paginationInterface&&(n.paginationInterface.destroy(),n.paginationInterface=null),this.source.destroy(),this};var c=new WeakMap;StyledElements.ModelTable=n}(StyledElements.Utils),function(t){"use strict";var e=function(t){StyledElements.StyledElement.call(this,["change"]),this.wrapperElement=document.createElement("span"),this.setTextContent(t.initialContent),this._onFocus=function(t){var e=document.createRange();e.selectNodeContents(this.wrapperElement);var n=window.getSelection();n.removeAllRanges(),n.addRange(e),document.addEventListener("mousedown",this._onBlur,!1)}.bind(this),this._onKeydown=function(t){13===t.keyCode?this._onBlur():27===t.keyCode&&(this.wrapperElement.textContent=this._prev_content,this._onBlur())}.bind(this),this._onBlur=function(t){if(this.wrapperElement.hasAttribute("contenteditable")){document.removeEventListener("mousedown",this._onBlur,!1);var e=this.wrapperElement.textContent;this.wrapperElement.textContent=e,this._prev_content!==e&&this.dispatchEvent("change",e),this.disableEdition()}}.bind(this),this.wrapperElement.addEventListener("focus",this._onFocus,!0),this.wrapperElement.addEventListener("keydown",this._onKeydown,!0),this.wrapperElement.addEventListener("blur",this._onBlur,!0)};t.inherit(e,StyledElements.StyledElement),e.prototype.disableEdition=function(){this.wrapperElement.hasAttribute("contenteditable")&&(this.wrapperElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.removeAttribute("contenteditable"),this.wrapperElement.blur(),this.wrapperElement.scrollLeft=0,this.wrapperElement.scrollTop=0)},e.prototype.enableEdition=function(){this.wrapperElement.hasAttribute("contenteditable")||(this.wrapperElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.setAttribute("contenteditable","true"),this._prev_content=this.wrapperElement.textContent),this.wrapperElement.focus()},e.prototype.setTextContent=function(t){return this.wrapperElement.textContent=t,this},e.prototype.destroy=function(){this.wrapperElement.removeEventListener("focus",this._onFocus,!0),this.wrapperElement.removeEventListener("keydown",this._onKeydown,!0),this.wrapperElement.removeEventListener("blur",this._onBlur,!0),this._onFocus=null,this._onKeydown=null,this._onBlur=null,StyledElements.StyledElement.prototype.destroy.call(this)},StyledElements.EditableElement=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){e=t.merge({initialValue:"",class:""},e),StyledElements.InputElement.call(this,e.initialValue,[]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"styled_hidden_field"),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","hidden"),null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue),this.wrapperElement.appendChild(this.inputElement)};t.inherit(e,StyledElements.InputElement),StyledElements.HiddenField=e}(StyledElements.Utils),function(t){"use strict";var e=function(t){StyledElements.InputElement.call(this,"",["change"]),Object.defineProperty(this,"name",{value:t}),this.buttons=[]};t.inherit(e,StyledElements.InputElement),e.prototype.insertButton=function(t){return this.buttons[this.buttons.length]=t,t.addEventListener("change",function(){this.dispatchEvent("change")}.bind(this)),this},e.prototype.getValue=function(){var t,e=[];if(this.buttons[0]instanceof StyledElements.CheckBox)for(t=0;t<this.buttons.length;t++)this.buttons[t].inputElement.checked&&e.push(this.buttons[t].getValue());else for(t=0;t<this.buttons.length;t++)if(this.buttons[t].inputElement.checked)return this.buttons[t].getValue();return e},e.prototype.setValue=function(t){null==t?t=[]:"string"==typeof t&&(t=[t]);for(var e=0;e<this.buttons.length;e++)-1!==t.indexOf(this.buttons[e].inputElement.value)?this.buttons[e].setValue(!0):this.buttons[e].setValue(!1);return this},e.prototype.reset=function(){for(var t=0;t<this.buttons.length;t++)this.buttons[t].reset();return this},e.prototype.getSelectedButtons=function(){var t;if(0===this.buttons.length)return[];if(this.buttons[0]instanceof StyledElements.CheckBox){var e=[];for(t=0;t<this.buttons.length;t++)this.buttons[t].inputElement.checked&&(e[e.length]=this.buttons[t]);return e}for(t=0;t<this.buttons.length;t++)if(this.buttons[t].inputElement.checked)return[this.buttons[t]];return[]},StyledElements.ButtonsGroup=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){"initiallyChecked"in(e=t.merge({initialValue:!1,class:"",group:null,secondInput:null,value:!0},e))&&(e.initialValue=e.initiallyChecked),StyledElements.InputElement.call(this,e.initialValue,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.className="checkbox",this.wrapperElement.setAttribute("type","checkbox"),this.inputElement=this.wrapperElement,null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.checkedValue=e.value,this.inputElement.setAttribute("value",e.value),this.secondInput=e.secondInput,this.setValue(e.initialValue),e.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",e.group.name),e.group.insertButton(this)):"string"==typeof e.group&&this.wrapperElement.setAttribute("name",e.group),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("change",function(){this.enabled&&(null!=this.secondInput&&this.secondInput.setDisabled(!this.inputElement.checked),this.dispatchEvent("change"))}.bind(this),!0)};t.inherit(e,StyledElements.InputElement),e.prototype.reset=function(){this.setValue(this.defaultValue)},e.prototype.getValue=function(){return!0===this.checkedValue&&null==this.secondInput?this.inputElement.checked:null==this.secondInput?this.inputElement.checked?this.checkedValue:null:this.secondInput.getValue()},e.prototype.setValue=function(t){this.inputElement.checked=null!=t&&!1!==t,null!=this.secondInput&&(this.secondInput.setDisabled(!this.inputElement.checked),this.inputElement.checked&&this.secondInput.setValue(t))},StyledElements.CheckBox=e}(StyledElements.Utils),function(t){"use strict";var e=function(e){e=t.merge({initiallyChecked:!1,class:"",group:null,value:null},e),StyledElements.InputElement.call(this,e.initiallyChecked,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.setAttribute("type","radio"),null!=e.value&&this.wrapperElement.setAttribute("value",e.value),this.inputElement=this.wrapperElement,null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),!0===e.initiallyChecked&&this.inputElement.setAttribute("checked",!0),e.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",e.group.name),e.group.insertButton(this)):"string"==typeof e.group&&this.wrapperElement.setAttribute("name",e.group),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("change",function(){this.enabled&&this.dispatchEvent("change")}.bind(this),!0)};t.inherit(e,StyledElements.InputElement),e.prototype.insertInto=function(t,e){var n=this.inputElement.checked;StyledElements.StyledElement.prototype.insertInto.call(this,t,e),this.inputElement.checked=n},e.prototype.reset=function(){return this.inputElement.checked=this.defaultValue,this},e.prototype.setValue=function(t){return this.inputElement.checked=t,this},StyledElements.RadioButton=e}(StyledElements.Utils),function(t){"use strict";var e=function(t,e){0!==arguments.length&&(StyledElements.StyledElement.call(this,[]),e.name=t,this._fieldId=t,this._initialValue=e.initialValue,this._defaultValue=e.defaultValue,this._label=e.label,Object.defineProperty(this,"required",{value:"required"in e&&!!e.required}),this._readOnly=!!e.readOnly,this._hidden=!!e.hidden,e.description?this._description=e.description:this._description=e.label)};t.inherit(e,StyledElements.StyledElement),e.prototype.repaint=function(){this.inputElement.repaint()},e.prototype.getValue=function(){return this.inputElement.getValue()},e.prototype.setValue=function(t){this.isValidValue(t)&&this._setValue(t)},e.prototype.getLabel=function(){return this._label},e.prototype.getDescription=function(){return this._description},e.prototype.getDefaultValue=function(){return this._defaultValue},e.prototype.isEmpty=function(){return this._isEmptyValue(this.getValue())},e.prototype._isEmptyValue=function(t){return""===t||null==t},e.prototype._normalize=function(t){return null==t?"":(""+t).trim()},e.prototype._checkValue=function(t){return StyledElements.InputValidationError.NO_ERROR},e.prototype.checkValue=function(t){if(t=void 0===t?this.getValue():this._normalize(t),!(this instanceof StyledElements.SelectInputInterface)){if(this.required&&this._isEmptyValue(t))return StyledElements.InputValidationError.REQUIRED_ERROR;if(!this.required&&this._isEmptyValue(t))return StyledElements.InputValidationError.NO_ERROR}return this._checkValue(t)},e.prototype.validate=function(){null!=this.timeout&&clearTimeout(this.timeout);var t=this.checkValue();this._setError(t!==StyledElements.InputValidationError.NO_ERROR)},e.prototype.isValidValue=function(t){return this.checkValue(t)===StyledElements.InputValidationError.NO_ERROR},e.prototype._setValue=function(t){t=this._normalize(t),this.inputElement.setValue(t)},e.prototype._setError=function(t){t?this.inputElement.wrapperElement.classList.add("error"):this.inputElement.wrapperElement.classList.remove("error")},e.prototype.resetToDefault=function(){this._setError(!1),this._setValue(this._defaultValue)},e.prototype.reset=function(){this._setError(!1),this._setValue(this._initialValue)},e.prototype.focus=function(){this.inputElement.focus()},e.prototype.setDisabled=function(t){this.inputElement.setDisabled(this._readOnly||t)},e.prototype.enable=function(){this.setDisabled(!1)},e.prototype.disable=function(){this.setDisabled(!0)},e.prototype.insertInto=function(t){this.inputElement.insertInto(t)},e.prototype.assignDefaultButton=function(t){},StyledElements.InputInterface=e}(StyledElements.Utils),function(t){"use strict";var e=function(t,e){0!==arguments.length&&(StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.TextField(e),this.inputElement.addEventListener("change",function(){null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.validate.bind(this),700)}.bind(this)),this.inputElement.addEventListener("blur",this.validate.bind(this)))};t.inherit(e,StyledElements.InputInterface),e.parse=function(t){return t},e.stringify=function(t){return t},e.prototype.assignDefaultButton=function(t){this.inputElement.addEventListener("submit",function(){t.click()})},StyledElements.TextInputInterface=e}(StyledElements.Utils),function(){"use strict";var t,e={NO_ERROR:0,REQUIRED_ERROR:1,URL_ERROR:2,EMAIL_ERROR:3,ID_ERROR:4,COLOR_ERROR:5,BOOLEAN_ERROR:6,VERSION_ERROR:7,OUT_OF_RANGE_ERROR:8};StyledElements.InputValidationError=e,(t=function(){this.fieldsWithErrorById={}}).prototype._addValidationError=function(t,e){void 0===this.fieldsWithErrorById[t]&&(this.fieldsWithErrorById[t]=[]),this.fieldsWithErrorById[t].push(e)},t.prototype.validate=function(t){var e=t.checkValue();e!==StyledElements.InputValidationError.NO_ERROR?(t._setError(!0),this._addValidationError(e,t.getLabel())):t._setError(!1)},t.prototype._buildErrorMsg=function(t){var e,n,i;switch(t=parseInt(t,10)){case StyledElements.InputValidationError.REQUIRED_ERROR:e=StyledElements.Utils.gettext("The following required fields are empty: %(fields)s.");break;case StyledElements.InputValidationError.URL_ERROR:e=StyledElements.Utils.gettext("The following fields do not contain a valid URL: %(fields)s.");break;case StyledElements.InputValidationError.EMAIL_ERROR:e=StyledElements.Utils.gettext("The following fields do not contain a valid E-Mail address: %(fields)s.");break;case StyledElements.InputValidationError.VERSION_ERROR:e=StyledElements.Utils.gettext("The following field do not contain a valid version number: %(fields)s.");break;case StyledElements.InputValidationError.ID_ERROR:e=StyledElements.Utils.gettext("The following fields contain invalid characters: %(fields)s.");break;case StyledElements.InputValidationError.COLOR_ERROR:e=StyledElements.Utils.gettext("The following fields do not contain a valid color value: %(fields)s.");break;case StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:e=StyledElements.Utils.gettext("The following fields does contain an out of range value: %(fields)s.")}for(n="",i=0;i<this.fieldsWithErrorById[t].length;i+=1)n+=", "+this.fieldsWithErrorById[t][i];return n=n.substring(2),StyledElements.Utils.interpolate(e,{fields:n})},t.prototype.toHTML=function(){var t,e=[];for(t in this.fieldsWithErrorById)this.fieldsWithErrorById.hasOwnProperty(t)&&e.push(this._buildErrorMsg(t));return e},StyledElements.ValidationErrorManager=t;var n=function(t,e){0!==arguments.length&&(StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.PasswordField(e))};n.prototype=new StyledElements.InputInterface,n.parse=StyledElements.TextInputInterface.parse,n.stringify=StyledElements.TextInputInterface.stringify,StyledElements.PasswordInputInterface=n;var i=function(t,e){0!==arguments.length&&(StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.List(e))};(i.prototype=new StyledElements.InputInterface).parse=function(t){return JSON.parse(t)},i.prototype.stringify=function(t){return JSON.stringify(t)},i.prototype._normalize=function(t){Array.isArray(t)||(t=[])},i.prototype._setValue=function(t){this.inputElement.cleanSelection(),this.inputElement.addSelection(t)},i.prototype.getValue=function(){return this.inputElement.getSelection()},i.prototype.isEmpty=function(){return 0===this.getValue().length},StyledElements.ListInputInterface=i;var s=function(t,e){0!==arguments.length&&(StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.NumericField(e))};s.prototype=new StyledElements.InputInterface,s.parse=function(t){return Number(t)},s.prototype._normalize=function(t){return null==t?0:Number(t)},s.prototype._checkValue=function(t){return!Number.isFinite(t)||t<this.inputElement.options.min||t>this.inputElement.options.max?StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:StyledElements.InputValidationError.NO_ERROR},StyledElements.NumberInputInterface=s;var l=function(t,e){StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.TextArea(e),this.events.blur=this.inputElement.events.blur};l.prototype=new StyledElements.InputInterface,l.parse=StyledElements.TextInputInterface.parse,l.stringify=StyledElements.TextInputInterface.stringify,StyledElements.LongTextInputInterface=l;var r=function(t,e){0!==arguments.length&&StyledElements.TextInputInterface.call(this,t,e)};r.prototype=new StyledElements.TextInputInterface,r.parse=StyledElements.TextInputInterface.parse,r.stringify=StyledElements.TextInputInterface.stringify,r.prototype._URLChecker=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,r.prototype._checkValue=function(t){return this._URLChecker.test(t)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.URL_ERROR},StyledElements.URLInputInterface=r;var o=function(t,e){StyledElements.TextInputInterface.call(this,t,e)};(o.prototype=new StyledElements.TextInputInterface)._EMailChecker=/^[\w\d._%+-]+@[\w\d.\-]+\.[\w]{2,4}$/,o.prototype._checkValue=function(t){return this._EMailChecker.test(t)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.EMAIL_ERROR},StyledElements.EMailInputInterface=o;var a=function(t,e){StyledElements.InputInterface.call(this,t,e),"string"==typeof e.initialValue?e.initiallyChecked="true"===e.initialValue.toLowerCase():"boolean"==typeof e.initialValue&&(e.initiallyChecked=e.initialValue),this.inputElement=new StyledElements.CheckBox(e)};a.prototype=new StyledElements.InputInterface,a.parse=function(t){return"true"===(""+t).trim().toLowerCase()},a.stringify=function(t){return""+t},a.prototype.isEmpty=function(){return!1},a.prototype._normalize=function(t){return!!t},a.prototype._checkValue=function(t){return"boolean"==typeof t?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.BOOLEAN_ERROR},StyledElements.BooleanInputInterface=a;var u=function(t,e){if("required"in e||(e.required=!0),StyledElements.InputInterface.call(this,t,e),"function"==typeof e.entries)this._update=e.entries;else if(e.initialEntries&&!this.required){var n,i=!1;for(n=0;n<e.initialEntries.length;n+=1)if(this._isEmptyValue(e.initialEntries[n].value)){i=!0;break}i||(e.initialEntries=[{label:"---------",value:null}].concat(e.initialEntries))}this.inputElement=new StyledElements.Select(e)};u.prototype=new StyledElements.InputInterface,u.parse=function(t){return t},u.stringify=function(t){return""+t},u.prototype._setValue=function(t){var e;this._update&&(this.inputElement.clear(),e=this._update(),this.required||(e=[{label:"---------",value:null}].concat(e)),this.inputElement.addEntries(e)),this.inputElement.setValue(t)},u.prototype._checkValue=function(t){var e;if("string"!=typeof t)try{e=this.inputElement.idFunc(t)}catch(t){}else e=t;return"string"==typeof e&&e in this.inputElement.optionValues?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.OUT_OF_RANGE_ERROR},StyledElements.SelectInputInterface=u;var h=function(t,e){StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.StyledHiddenField(e)};h.prototype=new StyledElements.InputInterface,StyledElements.HiddenInputInterface=h;var c=function(t,e){var n,i,s,l;if(0!==arguments.length){switch(StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.ButtonsGroup(t),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="button_group",e.kind){case"radio":n=StyledElements.RadioButton;break;case"checkbox":n=StyledElements.CheckBox;break;default:throw new Error}for(s=0;s<e.buttons.length;s+=1)i=e.buttons[s],(l=document.createElement("label")).className=e.kind,new n({group:this.inputElement,value:i.value,secondInput:i.secondInput}).insertInto(l),l.appendChild(document.createTextNode(i.label)),i.secondInput&&i.secondInput.insertInto(l),this.wrapperElement.appendChild(l);"initialValue"in e&&this.inputElement.setValue(e.initialValue)}};(c.prototype=new StyledElements.InputInterface).insertInto=function(t){t.appendChild(this.wrapperElement)},c.prototype._setValue=function(t){this.inputElement.setValue(t)},c.prototype._setError=function(t){},StyledElements.ButtonGroupInputInterface=c;var p=function(t,e){StyledElements.InputInterface.call(this,t,e),this.inputElement=new StyledElements.FileField(e)};(p.prototype=new StyledElements.InputInterface).getValue=function(){return this.inputElement.getValue()},p.prototype._setValue=function(t){},p.prototype._setError=function(t){},p.prototype.setDisabled=function(t){this.inputElement.disabled=!!t},StyledElements.FileInputInterface=p;var d=function(t,e){this.entries=[],this.fields=e.fields,this.wrapperElement=new StyledElements.Container,this._addEntry()};(d.prototype=new StyledElements.InputInterface)._addEntry=function(){var t,e;return(t={}).wrapper=document.createElement("div"),e={"":{type:"lineLayout",fields:this.fields}},t.form=new StyledElements.Form(e,{useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1}),t.form.wrapperElement.style.display="inline-block",t.form.wrapperElement.style.verticalAlign="middle",t.form.insertInto(t.wrapper),t.addRowButton=new StyledElements.Button({text:"+"}),t.addRowButton.addEventListener("click",function(){this._addEntry()}.bind(this)),t.addRowButton.insertInto(t.wrapper),t.removeRowButton=new StyledElements.Button({text:"-"}),t.removeRowButton.addEventListener("click",function(){this.control._removeEntry(t)}.bind({control:this,entry:t})),t.removeRowButton.insertInto(t.wrapper),this.entries.push(t),this.wrapperElement.appendChild(t.wrapper),t},d.prototype._removeEntry=function(t){var e;this.wrapperElement.removeChild(t.wrapper),e=this.entries.indexOf(t),this.entries.splice(e,1),t.form.destroy(),0===this.entries.length&&this._addEntry()},d.prototype._removeAllEntries=function(){var t,e;for(t=0;t<this.entries.length;t+=1)e=this.entries[t],this.wrapperElement.removeChild(e.wrapper),e.form.destroy();this.entries=[]},d.prototype.getValue=function(){var t,e=[];for(t=0;t<this.entries.length;t+=1)e.push(this.entries[t].form.getData());return e},d.prototype._setValue=function(t){var e;for(this._removeAllEntries(),t instanceof Array||(t=[]),e=0;e<t.length;e+=1)this._addEntry().form.setData(t[e]);0===this.entries.length&&this._addEntry()},d.prototype._setError=function(t){},StyledElements.MultivaluedInputInterface=d;var m=function(t,e,n){this.form=new StyledElements.Form(e.fields,{factory:n,useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1})};(m.prototype=new StyledElements.InputInterface).repaint=function(){return this.form.repaint()},m.prototype.insertInto=function(t){this.form.insertInto(t)},m.prototype.getValue=function(){return this.form.getData()},m.prototype._setValue=function(t){return this.form.setData(t)},m.prototype._setError=function(t){},StyledElements.FieldSetInterface=m}(),function(t){"use strict";var e=/^([1-9]\d*|0)(?:\.([1-9]\d*|0))*$/,n=function(t,e){null==e&&(e={}),null==e.placeholder&&(e.placeholder="1.0"),StyledElements.TextInputInterface.call(this,t,e)};t.inherit(n,StyledElements.TextInputInterface),n.prototype._checkValue=function(t){return null!=t.match(e)?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.VERSION_ERROR},StyledElements.VersionInputInterface=n}(StyledElements.Utils),function(){"use strict";var t={boolean:StyledElements.BooleanInputInterface,text:StyledElements.TextInputInterface,version:StyledElements.VersionInputInterface,password:StyledElements.PasswordInputInterface,hidden:StyledElements.HiddenInputInterface,list:StyledElements.ListInputInterface,number:StyledElements.NumberInputInterface,longtext:StyledElements.LongTextInputInterface,url:StyledElements.URLInputInterface,email:StyledElements.EMailInputInterface,select:StyledElements.SelectInputInterface,buttons:StyledElements.ButtonGroupInputInterface,file:StyledElements.FileInputInterface,fieldset:StyledElements.FieldSetInterface,multivalued:StyledElements.MultivaluedInputInterface};StyledElements.InputInterfaceFactory=function(){var e=StyledElements.Utils.clone(t);this.createInterface=function(t,n){var i=e[n.type];if(null==i)throw new Error(n.type);var s=new i(t,n,this);return n.initiallyDisabled&&s.disable(),s},this.addFieldType=function(t,n){if(!(n.prototype instanceof StyledElements.InputInterface))throw new TypeError;if(void 0!==e[t])throw new Error;e[t]=n},this.parse=function(t,n){if(null==e[t])throw new TypeError("Invalid data type");return e[t].parse(n)},this.stringify=function(t,n){if(null==e[t])throw new TypeError("Invalid data type");return e[t].stringify(n)}}}(),function(){"use strict";StyledElements.DefaultInputInterfaceFactory=new StyledElements.InputInterfaceFactory}(),function(t,e){"use strict";var n=function(t,n){var r,o,a;if(a={readOnly:!1,buttonArea:null,setdefaultsButton:!1,resetButton:!1,acceptButton:!0,cancelButton:!0,useHtmlForm:!0,factory:StyledElements.DefaultInputInterfaceFactory},n&&n.readOnly&&(a.acceptButton=!1,a.cancelButton=!1),n=e.merge(a,n),null==t||"object"!=typeof t)throw new TypeError("invalid fields parameter");Array.isArray(t)||(t=i(t)),this.setdefaultsButton=null,n.setdefaultsButton instanceof StyledElements.Button?this.setdefaultsButton=n.setdefaultsButton:!0===n.setdefaultsButton&&(this.setdefaultsButton=new StyledElements.Button({usedInForm:n.useHtmlForm,text:e.gettext("Set Defaults")})),this.resetButton=null,n.resetButton instanceof StyledElements.Button?this.resetButton=n.resetButton:!0===n.resetButton&&(this.resetButton=new StyledElements.Button({usedInForm:n.useHtmlForm,text:e.gettext("Reset")})),this.acceptButton=null,n.acceptButton instanceof StyledElements.Button?this.acceptButton=n.acceptButton:!0===n.acceptButton&&(this.acceptButton=new StyledElements.Button({usedInForm:n.useHtmlForm,class:"btn-primary",text:e.gettext("Accept")})),this.cancelButton=null,n.cancelButton instanceof StyledElements.Button?this.cancelButton=n.cancelButton:!0===n.cancelButton&&(this.cancelButton=new StyledElements.Button({usedInForm:n.useHtmlForm,text:e.gettext("Cancel")})),StyledElements.StyledElement.call(this,["submit","cancel"]),this.childComponents=[],this.readOnly=n.readOnly,this.fields={},this.fieldList=t,this.focusField=t.length>0?t[0].name:null,this.fieldInterfaces={},this.factory=n.factory,r=document.createElement("div"),n.useHtmlForm?(this.wrapperElement=document.createElement("form"),this.wrapperElement.addEventListener("submit",function(t){t.preventDefault()},!0),this.wrapperElement.appendChild(r)):this.wrapperElement=r,r.appendChild(this.pBuildFieldTable(t)),this.wrapperElement.className="styled_form",this.msgElement=document.createElement("div"),this.msgElement.className="alert alert-error",r.appendChild(this.msgElement),u.call(this,[]),null!=n.buttonArea?o=n.buttonArea:!1===n.acceptButton&&!1===n.cancelButton||((o=document.createElement("div")).className="buttons",r.appendChild(o)),null!=this.setdefaultsButton&&(this.setdefaultsButton.addEventListener("click",this.defaults.bind(this)),this.setdefaultsButton.insertInto(o)),null!=this.resetButton&&(this.resetButton.addEventListener("click",this.reset.bind(this)),this.resetButton.insertInto(o)),null!=this.acceptButton&&(this.acceptButton.addEventListener("click",s.bind(this)),this.acceptButton.insertInto(o)),null!=this.cancelButton&&(this.cancelButton.addEventListener("click",l.bind(this)),this.cancelButton.insertInto(o))};e.inherit(n,StyledElements.StyledElement),n.prototype.repaint=function(t){var e;for(e=0;e<this.childComponents.length;e+=1)this.childComponents[e].repaint(t);for(e in this.fieldInterfaces)this.fieldInterfaces[e].repaint();return this},n.prototype.pBuildFieldGroups=function(t){var e,n,i,s;return e=new StyledElements.Notebook({full:!1}),this.childComponents.push(e),t.forEach(function(t){(n=e.createTab({label:t.shortTitle,closable:!1})).addEventListener("show",this.repaint.bind(this)),!0===t.nested?(i={name:t.name,type:"fieldset",fields:t.fields},(s=this.factory.createInterface(t.name,i)).assignDefaultButton(this.acceptButton),this.fieldInterfaces[t.name]=s,this.fields[t.name]=i,n.appendChild(s)):n.appendChild(this.pBuildFieldTable(t.fields))},this),e.wrapperElement},n.prototype.pBuildFieldTable=function(t){var e,n;return t[0]&&"group"===t[0].type?this.pBuildFieldGroups(t):((e=document.createElement("table")).setAttribute("cellspacing","0"),e.setAttribute("cellpadding","0"),n=document.createElement("tbody"),e.appendChild(n),t.forEach(function(t){var e,i,s=t.name;switch(e=n.insertRow(-1),t.type){case"columnLayout":(i=e.insertCell(-1)).setAttribute("colspan",2),r.call(this,t,i);break;case"lineLayout":(i=e.insertCell(-1)).setAttribute("colspan",2),o.call(this,t,i);break;case"hidden":e.className="hidden";default:a.call(this,s,t,e)}},this),e)},n.prototype.extraValidation=function(t){return[]},n.prototype.getData=function(){var t,e,n;for(e in t={},this.fieldInterfaces)n=this.fieldInterfaces[e],t[e]=n.getValue();return t},n.prototype.setData=function(t){var e;if("object"!=typeof t&&void 0!==t)throw new TypeError;if(u.call(this,[]),null!=t)for(e in this.fieldInterfaces)this.fieldInterfaces[e]._setValue(t[e]);else for(e in this.fields)this.fieldInterfaces[e].reset();return this},n.prototype.update=function(t){var e;if(null==t||"object"!=typeof t)throw new TypeError("Invalid data value");for(e in u.call(this,[]),this.fieldInterfaces)e in t&&this.fieldInterfaces[e]._setValue(t[e]);return this},n.prototype.is_valid=function(){var t,e,n,i=new StyledElements.ValidationErrorManager;for(t in this.fieldInterfaces)i.validate(this.fieldInterfaces[t]);return e=this.extraValidation(this.fields),n=i.toHTML(),null!==e&&(n=n.concat(e)),u.call(this,n),0===n.length},n.prototype.reset=function(){return this.setData()},n.prototype.defaults=function(){var t,e;for(e in u.call(this,[]),this.fields)(t=this.fieldInterfaces[e])._setValue(t._defaultValue);return this},n.prototype.destroy=function(){var t=0;for(t=0;t<this.childComponents.length;t+=1)this.childComponents[t].destroy();this.childComponents=null,this.setdefaultsButton&&(this.setdefaultsButton.destroy(),this.setdefaultsButton=null),this.resetButton&&(this.resetButton.destroy(),this.resetButton=null),this.acceptButton&&(this.acceptButton.destroy(),this.acceptButton=null),this.cancelButton&&(this.cancelButton.destroy(),this.cancelButton=null)},n.prototype._onenabled=function(t){var e,n;for(e in this.fieldInterfaces)(n=this.fieldInterfaces[e]).setDisabled(!t||this.readOnly||n._readOnly);null!=this.resetButton&&(this.resetButton.enabled=t),null!=this.setdefaultsButton&&(this.setdefaultsButton.enabled=t),null!=this.acceptButton&&(this.acceptButton.enabled=t),null!=this.cancelButton&&(this.cancelButton.enabled=t)},n.prototype.focus=function(){var t=this.fieldInterfaces[this.focusField];return t&&t.focus(),this},n.prototype.displayMessage=function(t){u.call(this,[t])},n.prototype.insertInto=function(t,e){StyledElements.StyledElement.prototype.insertInto.call(this,t,e),this.repaint()};var i=function(t){var e,n,i=[];for(e in t)"name"in(n=t[e])||(n.name=e),i.push(n);return i},s=function(){if(this.is_valid()){var t=this.getData();this.dispatchEvent("submit",t)}},l=function(){this.dispatchEvent("cancel")},r=function(t,e){var n,i,s,l;for((n=document.createElement("table")).setAttribute("cellspacing","0"),n.setAttribute("cellpadding","0"),i=document.createElement("tbody"),n.appendChild(i),s=i.insertRow(-1),l=0;l<t.columns.length;l+=1)s.insertCell(-1).appendChild(this.pBuildFieldTable(t.columns[l]));e.appendChild(n)},o=function(t,e){i(t.fields).forEach(function(t){var n,i,s;n=t.name,(i=this.factory.createInterface(n,t)).assignDefaultButton(this.acceptButton),i.insertInto(e),s=null,i.wrapperElement&&i.wrapperElement.wrapperElement?s=i.wrapperElement.wrapperElement:i.inputElement&&i.inputElement.wrapperElement&&(s=i.inputElement.wrapperElement),s&&(s.style.display="inline-block",s.style.verticalAlign="middle"),this.fieldInterfaces[n]=i,this.fields[n]=t},this)},a=function(t,e,n){var i,s,l,r,o,a,u,h;return"separator"===e.type?((i=n.insertCell(-1)).setAttribute("colspan","2"),s=document.createElement("hr"),void i.appendChild(s)):"label"===e.type?((l=n.insertCell(-1)).setAttribute("colspan","2"),l.addClassName("label-row"),e.url?((o=document.createElement("a")).setAttribute("href",e.url),o.setAttribute("target","_blank")):o=document.createElement("label"),o.appendChild(document.createTextNode(e.label)),void l.appendChild(o)):(h=this.factory.createInterface(t,e),(r=n.insertCell(-1)).classList.add("label-cell"),(o=document.createElement("label")).textContent=e.label,r.appendChild(o),null!=e.description&&new StyledElements.Tooltip({content:e.description,placement:["right","bottom","top","left"]}).bind(o),e.required&&!this.readOnly&&((a=document.createElement("span")).appendChild(document.createTextNode("*")),a.className="required_mark",r.appendChild(a)),u=document.createElement("td"),n.appendChild(u),h.assignDefaultButton(this.acceptButton),h.insertInto(u),(this.readOnly||h._readOnly)&&h.setDisabled(!0),this.fieldInterfaces[t]=h,void(this.fields[t]=e))},u=function(t){var e,n;if(this.msgElement.innerHTML="",t.length>0){for(e=0;e<t.length;e+=1)(n=document.createElement("p")).textContent=t[e],this.msgElement.appendChild(n);this.msgElement.style.display=""}else this.msgElement.style.display="none"};StyledElements.Form=n}(StyledElements,StyledElements.Utils),function(t){"use strict";var e,n,i,s,l;e=new StyledElements.GUIBuilder,n=function(t){this.autoHide&&1===this.source.totalPages?this.wrapperElement.style.display="none":this.wrapperElement.style.display="",this.totalPagesLabel.textContent=this.source.totalPages,this.currentPageLabel.textContent=this.source.currentPage,this.totalCountLabel.textContent=this.source.totalCount,i.call(this)},i=function(){this.source.currentPage<=1?(this.prevBtn.disable(),this.firstBtn.disable()):(this.prevBtn.enable(),this.firstBtn.enable()),this.source.currentPage>=this.source.totalPages?(this.nextBtn.disable(),this.lastBtn.disable()):(this.nextBtn.enable(),this.lastBtn.enable())},s=function(t){var n={firstBtn:this.firstBtn,prevBtn:this.prevBtn,nextBtn:this.nextBtn,lastBtn:this.lastBtn,currentPage:this.currentPageLabel,totalPages:this.totalPagesLabel,totalCount:this.totalCountLabel},i=e.parse(t,n);this.wrapperContainer.appendChild(i)},l=function(l,r){var o={layout:t.gettext(e.DEFAULT_OPENING+'<div class="se-input-group"><t:firstBtn/><t:prevBtn/><div class="se-box">Page: <t:currentPage/>/<t:totalPages/></div><t:nextBtn/><t:lastBtn/></div>'+e.DEFAULT_CLOSING),autoHide:!1};r=t.merge(o,r),this.autoHide=r.autoHide,StyledElements.StyledElement.call(this,[]),this.source=l,this.wrapperContainer=new StyledElements.Container({class:"pagination"}),this.wrapperElement=this.wrapperContainer.wrapperElement,this.firstBtn=new StyledElements.Button({class:"btn-first-page",iconClass:"fa fa-step-backward fa-fw"}),this.firstBtn.addEventListener("click",l.goToFirst.bind(l)),this.prevBtn=new StyledElements.Button({class:"btn-previous-page",iconClass:"fa fa-chevron-left fa-fw"}),this.prevBtn.addEventListener("click",l.goToPrevious.bind(l)),this.nextBtn=new StyledElements.Button({class:"btn-next-page",iconClass:"fa fa-chevron-right fa-fw"}),this.nextBtn.addEventListener("click",l.goToNext.bind(l)),this.lastBtn=new StyledElements.Button({class:"btn-last-page",iconClass:"fa fa-step-forward fa-fw"}),this.lastBtn.addEventListener("click",l.goToLast.bind(l)),this.currentPageLabel=document.createElement("span"),this.currentPageLabel.classList.add("current-page"),this.totalPagesLabel=document.createElement("span"),this.totalPagesLabel.classList.add("total-pages"),this.totalCountLabel=document.createElement("span"),this.totalCountLabel.classList.add("total-count"),s.call(this,r.layout),this.currentPageLabel.textContent=this.currentPage+1,this.totalPagesLabel.textContent=this.totalPages,i.call(this),this.source.addEventListener("requestEnd",n.bind(this))},t.inherit(l,StyledElements.StyledElement),l.prototype.changeLayout=function(t){s.call(this,t)},StyledElements.PaginationInterface=l}(StyledElements.Utils),function(t){"use strict";var e=new StyledElements.GUIBuilder,n=function(t,e){switch(this.element.classList.remove("top","right","bottom","left"),e){case"top":this.element.classList.add("top"),this.element.style.left=t.left+(t.width-this.element.offsetWidth)/2+"px",this.element.style.top=t.top-this.element.offsetHeight+"px";break;case"right":this.element.classList.add("right"),this.element.style.left=t.right+"px",this.element.style.top=t.top+(t.height-this.element.offsetHeight)/2+"px";break;case"bottom":this.element.classList.add("bottom"),this.element.style.left=t.left+(t.width-this.element.offsetWidth)/2+"px",this.element.style.top=t.bottom+"px";break;case"left":this.element.classList.add("left"),this.element.style.left=t.left-this.element.offsetWidth+"px",this.element.style.top=t.top+(t.height-this.element.offsetHeight)/2+"px"}},i=function(){var t=this.element.parentElement.getBoundingClientRect(),e=this.element.getBoundingClientRect(),n=e.width-Math.max(e.right-t.right,0)-Math.max(t.left-e.left,0),i=e.height-Math.max(e.bottom-t.bottom,0)-Math.max(t.top-e.top,0);return e.width*e.height-n*i},s=function(t,e){var s=0,l=[];do{n.call(this,t,e[s]),l.push(i.call(this)),s+=1}while(l[s-1]>0&&s<e.length);l[s-1]>0&&function(t,e,i){var s=Math.min.apply(Math,e),l=i[e.indexOf(s)];n.call(this,t,l);var r=this.element.parentElement.getBoundingClientRect(),o=this.element.getBoundingClientRect();o.bottom>r.bottom&&(this.element.style.top="",this.element.style.bottom="10px",o=this.element.getBoundingClientRect()),o.top<r.top&&(this.element.style.top="10px")}.call(this,t,l,e)},l=function(n){if("Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerPopup(this),this.visible)return this.element.classList.add("in"),void this.repaint();"getBoundingClientRect"in n&&(n=n.getBoundingClientRect()),this.element=e.parse('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="popover fade"><div class="arrow"/><h3 class="popover-title"><t:title/></h3><div class="popover-content"><t:content/></div></div></s:styledgui>',{title:this.options.title,content:this.options.content}).elements[0],this.element.addEventListener("transitionend",o.bind(this));var i=t.getFullscreenElement()||document.body;return i.appendChild(this.element),i.addEventListener("click",this._disableCallback,!0),s.call(this,n,this.options.placement),this.element.classList.add("in"),this.dispatchEvent("show"),this},r=function(e){Object.defineProperty(this,"options",{value:t.merge({content:"",title:"",class:"",html:!1,placement:["right","bottom","left","top"]},e)}),StyledElements.StyledElement.call(this,[]),Object.defineProperties(this,{element:{value:null,writable:!0},visible:{get:function(){return null!=this.element}},_disableCallback:{value:function(t){0===t.button&&setTimeout(this.hide.bind(this),0)}.bind(this),enumerable:!1}})};t.inherit(r,StyledElements.StyledElement),r.prototype.bind=function(t,e){switch(e){case"click":t.addEventListener("click",this.toggle.bind(this),!0);break;case"hover":t.addEventListener("focus",this.show.bind(this,t),!1),t.addEventListener("blur",this.hide.bind(this),!1),t.addEventListener("mouseenter",this.show.bind(this,t),!0),t.addEventListener("mouseleave",this.hide.bind(this),!0),t.addEventListener("click",this.show.bind(this,t),!1);break;default:throw new TypeError("Invalid mode: "+e)}},r.prototype.toggle=function(t){return this.visible?this.hide():l.call(this,t)},r.prototype.show=function(t){return l.call(this,t)};var o=function(){null==this.element||this.element.classList.contains("in")||(this.element.remove(),this.element=null,"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterPopup(this),document.removeEventListener("click",this._disableCallback,!0),this.dispatchEvent("hide"))};r.prototype.hide=function(){var t;return this.visible?(t=!this.element.classList.contains("in")||"0"===getComputedStyle(this.element).getPropertyValue("opacity"),this.element.classList.remove("in"),t&&o.call(this),this):this},StyledElements.Popover=r}(StyledElements.Utils),function(t,e){"use strict";t.Panel=function(i){i=e.merge(e.clone(n),i),t.StyledElement.call(this,["click"].concat(i.events)),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="panel",i.state&&this.addClassName("panel-"+i.state),i.selectable&&this.addClassName("panel-selectable"),this.addClassName(i.class),this.heading=new t.Container({class:"panel-heading"}),this.heading.insertInto(this.wrapperElement),i.title&&this.setTitle(i.title),i.buttons.length&&(this.buttons=new t.Container({class:"panel-options"}),i.buttons.forEach(function(t){this.buttons.appendChild(t)},this),this.heading.appendChild(this.buttons)),i.subtitle&&this.setSubtitle(i.subtitle),i.noBody||(this.body=new t.Container({class:"panel-body"}),this.body.insertInto(this.wrapperElement)),Object.defineProperties(this,{active:{get:function(){return this.hasClassName("active")},set:function(t){this.active!==t&&this.toggleClassName("active",t)._onactive(t)}},title:{get:function(){return this.heading.title.text()}}}),this.wrapperElement.addEventListener("click",this._onclick.bind(this))},e.inherit(t.Panel,t.StyledElement,{_onactive:function(t){},_onclick:function(t){return t.stopPropagation(),this.dispatchEvent("click",t)},clear:function(){return null!=this.body&&this.body.clear(),this},setTitle:function(e){return null==this.heading.title&&(this.heading.title=new t.Container({class:"panel-title"}),this.heading.appendChild(this.heading.title)),this.heading.title.clear().appendChild(e),this},setSubtitle:function(e){return null==this.heading.subtitle&&(this.heading.subtitle=new t.Container({class:"panel-subtitle"}),this.heading.appendChild(this.heading.subtitle)),this.heading.subtitle.clear().appendChild(e),this}});var n={class:"",events:[],title:"",subtitle:"",state:"default",selectable:!1,noBody:!1,buttons:[]}}(StyledElements,StyledElements.Utils);